<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CSS Path Test</title>
    <style>
        body { 
            margin: 20px; 
            background: #000; 
            color: #0f0;
            font-family: monospace; 
        }
        .test-result {
            border: 1px solid #0f0;
            padding: 10px;
            margin: 10px 0;
        }
        .success { border-color: #0f0; background: rgba(0,255,0,0.1); }
        .error { border-color: #f00; background: rgba(255,0,0,0.1); }
    </style>
</head>
<body>
    <h1>CSS Loading Test</h1>
    
    <div class="test-result" id="test1">
        <h3>Test 1: Direct CSS Link</h3>
        <link rel="stylesheet" href="/src/styles/layout-override.css">
        <p>Testing direct link to layout-override.css</p>
    </div>

    <div class="test-result" id="test2">
        <h3>Test 2: Inline Override</h3>
        <style>
            .inline-test-container {
                display: grid !important;
                grid-template-columns: 1fr 280px !important;
                background: rgba(255, 255, 0, 0.2) !important;
                border: 2px solid yellow !important;
                padding: 20px !important;
                gap: 15px !important;
            }
        </style>
        <p>Testing inline CSS override</p>
    </div>

    <div class="inline-test-container">
        <div style="background: rgba(0,255,0,0.2); border: 1px solid #0f0; padding: 10px;">
            Game Area - Inline Test
        </div>
        <div style="background: rgba(0,0,255,0.2); border: 1px solid #00f; padding: 10px;">
            Chat Panel - Inline Test
        </div>
    </div>

    <script>
        // Test CSS loading
        console.log('=== CSS LOADING TEST ===');
        
        // Test if we can access CSS rules
        try {
            const styleSheets = document.styleSheets;
            console.log('Number of stylesheets:', styleSheets.length);
            
            for (let i = 0; i < styleSheets.length; i++) {
                const sheet = styleSheets[i];
                console.log(`Stylesheet ${i}:`, sheet.href || 'inline');
                
                if (sheet.href && sheet.href.includes('layout-override.css')) {
                    console.log('✓ Found layout-override.css!');
                    document.getElementById('test1').className += ' success';
                    
                    try {
                        console.log('CSS rules count:', sheet.cssRules.length);
                    } catch (e) {
                        console.log('Cannot access CSS rules (CORS)');
                    }
                }
            }
        } catch (e) {
            console.error('Error accessing stylesheets:', e);
            document.getElementById('test1').className += ' error';
        }
        
        // Test computed styles
        setTimeout(() => {
            const testContainer = document.querySelector('.inline-test-container');
            if (testContainer) {
                const styles = window.getComputedStyle(testContainer);
                console.log('Test container grid columns:', styles.gridTemplateColumns);
                
                if (styles.gridTemplateColumns.includes('280px') || styles.gridTemplateColumns.includes('1fr')) {
                    document.getElementById('test2').className += ' success';
                } else {
                    document.getElementById('test2').className += ' error';
                }
            }
        }, 100);
        
        // Test file existence
        fetch('/src/styles/layout-override.css')
            .then(response => {
                if (response.ok) {
                    console.log('✓ layout-override.css file exists and is accessible');
                    return response.text();
                } else {
                    throw new Error(`HTTP ${response.status}`);
                }
            })
            .then(cssText => {
                console.log('CSS file content length:', cssText.length);
                console.log('Contains container rule:', cssText.includes('.container') ? 'YES' : 'NO');
                console.log('Contains 280px:', cssText.includes('280px') ? 'YES' : 'NO');
            })
            .catch(error => {
                console.error('✗ Cannot access layout-override.css:', error);
            });
    </script>
</body>
</html>
