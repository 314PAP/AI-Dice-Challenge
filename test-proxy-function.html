<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test proxy funkce</title>
    
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- CSS importy -->
    <link rel="stylesheet" href="src/styles/main-optimized.css">
    
    <!-- Promƒõnn√© -->
    <link rel="stylesheet" href="src/styles/variables/colors.css">
    <link rel="stylesheet" href="src/styles/variables/sizes.css">
    <link rel="stylesheet" href="src/styles/variables/animations.css">
    
    <!-- Komponenty -->
    <link rel="stylesheet" href="src/styles/components/game-menu.css">
    <link rel="stylesheet" href="src/styles/components/game-controls.css">
    <link rel="stylesheet" href="src/styles/components/chat.css">
    <link rel="stylesheet" href="src/styles/components/modals.css">
    
    <!-- Bootstrap responzivn√≠ styly -->
    <link rel="stylesheet" href="src/styles/components/bootstrap-responsive.css">
    
    <!-- Ikony -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
    <div class="container-fluid p-4">
        <h1 class="text-center mb-4">üß™ Test proxy funkce addChatMessage</h1>
        
        <div class="row">
            <div class="col-md-8">
                <div class="card bg-dark border-warning">
                    <div class="card-header">
                        <h5 class="neon-yellow">Test Chat</h5>
                    </div>
                    <div class="card-body">
                        <div id="chatMessages" class="p-3 border border-secondary rounded mb-3" style="height: 400px; overflow-y: auto; background: rgba(0,0,0,0.5);"></div>
                        <div class="d-flex gap-2 flex-wrap">
                            <button class="btn btn-warning btn-sm" onclick="testSystemMessage()">window.addChatMessage('system', 'zpr√°va')</button>
                            <button class="btn btn-success btn-sm" onclick="testPlayerMessage()">window.addChatMessage('Hr√°ƒç', 'zpr√°va')</button>
                            <button class="btn btn-info btn-sm" onclick="testAIMessage()">window.addChatMessage('AI', 'zpr√°va', 'ai')</button>
                            <button class="btn btn-danger btn-sm" onclick="testDirectBootstrap()">addChatMessageBootstrap('Syst√©m', 'zpr√°va', 'system')</button>
                            <button class="btn btn-secondary btn-sm" onclick="clearMessages()">Vyƒçistit</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-4">
                <div class="card bg-dark border-info">
                    <div class="card-header">
                        <h5 class="neon-blue">Console Log</h5>
                    </div>
                    <div class="card-body">
                        <div id="consoleLog" style="height: 400px; overflow-y: auto; font-family: monospace; font-size: 0.8rem; background: #111; padding: 10px; border-radius: 5px;">
                            <div style="color: #0f0;">Console logov√°n√≠ zah√°jeno...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <div class="alert alert-info">
                <h6>Testovan√© sc√©n√°≈ôe:</h6>
                <ul class="mb-0">
                    <li><strong>window.addChatMessage('system', 'zpr√°va')</strong> ‚Üí Mƒõla by b√Ωt ≈ΩLUT√Å syst√©mov√° zpr√°va</li>
                    <li><strong>window.addChatMessage('Hr√°ƒç', 'zpr√°va')</strong> ‚Üí Mƒõla by b√Ωt ZELEN√Å hr√°ƒçsk√° zpr√°va</li>
                    <li><strong>window.addChatMessage('AI', 'zpr√°va', 'ai')</strong> ‚Üí Mƒõla by b√Ωt MODR√Å AI zpr√°va (fallback)</li>
                    <li><strong>addChatMessageBootstrap('Syst√©m', 'zpr√°va', 'system')</strong> ‚Üí P≈ô√≠m√© vol√°n√≠ ‚Üí ≈ΩLUT√Å syst√©mov√° zpr√°va</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="src/main-bootstrap.js"></script>
    
    <script>
        let messageCounter = 0;
        
        // Zachyt√°v√°n√≠ console.log pro zobrazen√≠
        const originalLog = console.log;
        console.log = function(...args) {
            originalLog(...args);
            
            const logDiv = document.getElementById('consoleLog');
            const timestamp = new Date().toLocaleTimeString();
            const message = document.createElement('div');
            message.innerHTML = `<span style="color: #666;">[${timestamp}]</span> ${args.join(' ')}`;
            logDiv.appendChild(message);
            logDiv.scrollTop = logDiv.scrollHeight;
        };
        
        function testSystemMessage() {
            messageCounter++;
            const message = `Test #${messageCounter}: Syst√©mov√° zpr√°va p≈ôes proxy - m√° b√Ωt ≈ΩLUT√Å! üü°`;
            console.log(`Vol√°m: window.addChatMessage('system', '${message}')`);
            window.addChatMessage('system', message);
        }
        
        function testPlayerMessage() {
            messageCounter++;
            const message = `Test #${messageCounter}: Hr√°ƒçsk√° zpr√°va - m√° b√Ωt ZELEN√Å! üü¢`;
            console.log(`Vol√°m: window.addChatMessage('Hr√°ƒç', '${message}')`);
            window.addChatMessage('Hr√°ƒç', message);
        }
        
        function testAIMessage() {
            messageCounter++;
            const message = `Test #${messageCounter}: AI zpr√°va - m√° b√Ωt MODR√Å! üîµ`;
            console.log(`Vol√°m: window.addChatMessage('AI', '${message}', 'ai')`);
            window.addChatMessage('AI', message, 'ai');
        }
        
        function testDirectBootstrap() {
            messageCounter++;
            const message = `Test #${messageCounter}: P≈ô√≠m√© vol√°n√≠ Bootstrap - m√° b√Ωt ≈ΩLUT√Å! üü°`;
            console.log(`Vol√°m: window.addChatMessageBootstrap('Syst√©m', '${message}', 'system')`);
            window.addChatMessageBootstrap('Syst√©m', message, 'system');
        }
        
        function clearMessages() {
            document.getElementById('chatMessages').innerHTML = '';
            document.getElementById('consoleLog').innerHTML = '<div style="color: #0f0;">Console vyƒçi≈°tƒõn...</div>';
            messageCounter = 0;
        }
        
        // Automatick√Ω test p≈ôi naƒçten√≠ str√°nky
        window.addEventListener('load', function() {
            console.log('üöÄ Str√°nka naƒçtena, spou≈°t√≠m automatick√© testy...');
            
            setTimeout(() => {
                console.log('=== Automatick√Ω test ===');
                testSystemMessage();
            }, 1000);
            
            setTimeout(() => {
                testPlayerMessage();
            }, 2000);
            
            setTimeout(() => {
                testAIMessage();
            }, 3000);
            
            setTimeout(() => {
                testDirectBootstrap();
            }, 4000);
            
            setTimeout(() => {
                console.log('=== Testy dokonƒçeny ===');
                console.log('Zkontrolujte barvy zpr√°v v chatu!');
            }, 5000);
        });
        
        // Zachyt√°v√°n√≠ chyb
        window.addEventListener('error', function(e) {
            console.log(`‚ùå CHYBA: ${e.error}`);
        });
    </script>
</body>
</html>
