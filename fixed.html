<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üé≤ AI Kostkov√° V√Ωzva</title>
    <link rel="icon" type="image/svg+xml" href="/dice.svg" />
    <style>
        /* Inline CSS pro zaji≈°tƒõn√≠ naƒçten√≠ */
        @import url('https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap');
        
        :root {
            --neon-green: #39ff14;
            --neon-orange: #ff6600;
            --neon-blue: #0099ff;
            --neon-pink: #ff00ff;
            --black-bg: #000000;
            --text-primary: #39ff14;
            --text-secondary: #39ff14;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Orbitron', monospace;
            background: var(--black-bg);
            color: var(--text-primary);
            min-height: 100vh;
            line-height: 1.4;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            min-height: 100vh;
        }
        
        .game-area {
            background: var(--black-bg);
            border: 2px solid var(--neon-green);
            border-radius: 10px;
            padding: 30px;
        }
        
        .chat-panel {
            background: var(--black-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 10px;
            padding: 25px;
            display: flex;
            flex-direction: column;
        }
        
        .game-title {
            text-align: center;
            font-size: 3rem;
            font-weight: 900;
            margin-bottom: 30px;
            color: var(--neon-green);
            letter-spacing: 2px;
        }
        
        .neon-icon {
            color: var(--neon-orange);
            text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor;
            animation: neonPulse 2s ease-in-out infinite alternate;
        }
        
        @keyframes neonPulse {
            from { text-shadow: 0 0 10px currentColor, 0 0 20px currentColor, 0 0 30px currentColor; }
            to { text-shadow: 0 0 15px currentColor, 0 0 25px currentColor, 0 0 35px currentColor; }
        }
        
        .target-score-setup {
            background: var(--black-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 25px;
            text-align: center;
            box-shadow: 0 0 15px var(--neon-blue);
        }
        
        .target-score-setup label {
            display: block;
            color: var(--neon-blue);
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 16px;
            margin-bottom: 12px;
        }
        
        .target-score-setup input {
            width: 150px;
            padding: 10px 15px;
            border: 2px solid var(--neon-orange);
            border-radius: 8px;
            background: var(--black-bg);
            color: var(--text-primary);
            font-family: 'Orbitron', monospace;
            font-size: 18px;
            font-weight: 700;
            text-align: center;
            margin: 0 10px 15px 10px;
            box-shadow: 0 0 10px var(--neon-orange);
        }
        
        .btn {
            background: var(--neon-green);
            color: var(--black-bg);
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s ease;
            text-transform: uppercase;
            letter-spacing: 1px;
            box-shadow: 0 0 15px var(--neon-green);
        }
        
        .btn:hover {
            transform: scale(1.05);
            box-shadow: 0 0 25px var(--neon-green);
        }
        
        .btn-primary {
            background: var(--neon-green);
            box-shadow: 0 0 15px var(--neon-green);
        }
        
        .btn-secondary {
            background: var(--neon-orange);
            box-shadow: 0 0 15px var(--neon-orange);
        }
        
        .players-container {
            display: flex;
            justify-content: space-around;
            align-items: center;
            background: var(--black-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 8px;
            padding: 20px;
            margin: 25px auto;
            max-width: 600px;
            box-shadow: 0 0 20px var(--neon-blue);
        }
        
        .player {
            display: flex;
            flex-direction: column;
            align-items: center;
            transition: transform 0.3s ease;
        }
        
        .player.active {
            transform: scale(1.15);
        }
        
        .player-head {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            margin-bottom: 8px;
            overflow: hidden;
            border: 2px solid var(--neon-green);
        }
        
        .player-head img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        .player-name {
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 12px;
            color: var(--neon-green);
            margin-bottom: 4px;
        }
        
        .player-score {
            font-family: 'Orbitron', monospace;
            font-weight: 400;
            font-size: 10px;
            color: var(--text-secondary);
        }
        
        .game-controls {
            background: var(--black-bg);
            border: 2px solid var(--neon-orange);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            text-align: center;
        }
        
        .turn-info {
            background: var(--black-bg);
            border: 2px solid var(--neon-blue);
            border-radius: 8px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            color: var(--neon-blue);
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 16px;
        }
        
        .dice-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .die {
            width: 60px;
            height: 60px;
            background: var(--black-bg);
            border: 2px solid var(--neon-green);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Orbitron', monospace;
            font-weight: 900;
            font-size: 24px;
            color: var(--neon-green);
            cursor: pointer;
            transition: all 0.2s ease;
        }
        
        .die:hover {
            transform: scale(1.1);
            box-shadow: 0 0 15px var(--neon-green);
        }
        
        .roll-controls {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 20px;
        }
        
        .chat-header h2 {
            color: var(--neon-blue);
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 18px;
            margin-bottom: 20px;
            text-align: center;
        }
        
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            margin-bottom: 20px;
            max-height: 400px;
            padding: 10px;
            background: var(--black-bg);
            border: 1px solid var(--neon-green);
            border-radius: 8px;
        }
        
        .chat-message {
            margin-bottom: 12px;
            padding: 10px 15px;
            border-radius: 8px;
            background: var(--black-bg);
            border: 1px solid var(--neon-green);
            font-family: 'Orbitron', monospace;
            font-size: 13px;
        }
        
        .message-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 8px;
            font-size: 13px;
            font-weight: 700;
        }
        
        .message-sender {
            font-weight: 700;
            letter-spacing: 1px;
            color: var(--neon-green);
        }
        
        .message-time {
            color: #666;
            font-size: 11px;
        }
        
        .message-content {
            color: var(--text-primary);
            line-height: 1.4;
        }
        
        .chat-input {
            display: flex;
            gap: 10px;
        }
        
        .chat-input input {
            flex: 1;
            padding: 10px 15px;
            border: 2px solid var(--neon-green);
            border-radius: 8px;
            background: var(--black-bg);
            color: var(--text-primary);
            font-family: 'Orbitron', monospace;
            font-size: 14px;
        }
        
        .chat-input button {
            background: var(--neon-blue);
            color: var(--black-bg);
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            cursor: pointer;
        }
        
        .coffee-link {
            display: block;
            background: var(--black-bg);
            border: 2px solid var(--neon-orange);
            border-radius: 8px;
            padding: 8px 12px;
            color: var(--neon-orange);
            font-family: 'Orbitron', monospace;
            font-weight: 700;
            font-size: 12px;
            text-decoration: none;
            transition: all 0.2s ease;
            text-align: center;
            margin: 15px auto;
            width: fit-content;
            box-shadow: 0 0 10px var(--neon-orange);
        }
        
        .coffee-link:hover {
            background: var(--neon-orange);
            color: var(--black-bg);
            transform: scale(1.05);
            box-shadow: 0 0 20px var(--neon-orange);
        }
        
        @media (max-width: 1200px) {
            .container {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .chat-panel {
                order: 1;
                max-height: 400px;
            }
        }
        
        @media (max-width: 768px) {
            .game-title {
                font-size: 2rem;
            }
            
            .container {
                padding: 15px;
            }
            
            .players-container {
                flex-wrap: wrap;
                gap: 10px;
            }
            
            .player {
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="game-area">
            <div class="game-header">
                <h1 class="game-title"><span class="neon-icon">üé≤</span> AI Kostkov√° V√Ωzva</h1>
                <div class="target-score-setup" id="targetScoreSetup">
                    <label>C√≠lov√© sk√≥re: <input type="number" id="targetScoreInput" value="10000" min="1000" step="1000"></label>
                    <button class="btn btn-primary" id="startGameBtn">Zaƒç√≠t hru</button>
                </div>
                
                <a href="https://buymeacoffee.com/pipap" target="_blank" class="coffee-link">
                    <span class="neon-icon">‚òï</span> Kup mi k√°vu
                </a>
            </div>

            <div class="players-container">
                <div class="player human-player active">
                    <div class="player-head">
                        <img src="/ai-icons/human.svg" alt="Vy" />
                    </div>
                    <div class="player-name">Vy</div>
                    <div class="player-score">Sk√≥re: <span id="humanScore">0</span></div>
                </div>
                <div class="player gemini-player">
                    <div class="player-head">
                        <img src="/ai-icons/gemini.jpeg" alt="Gemini" />
                    </div>
                    <div class="player-name">Gemini</div>
                    <div class="player-score">Sk√≥re: <span id="geminiScore">0</span></div>
                </div>
                <div class="player chatgpt-player">
                    <div class="player-head">
                        <img src="/ai-icons/gpt.jpeg" alt="ChatGPT" />
                    </div>
                    <div class="player-name">ChatGPT</div>
                    <div class="player-score">Sk√≥re: <span id="chatgptScore">0</span></div>
                </div>
                <div class="player claude-player">
                    <div class="player-head">
                        <img src="/ai-icons/claude.jpeg" alt="Claude" />
                    </div>
                    <div class="player-name">Claude</div>
                    <div class="player-score">Sk√≥re: <span id="claudeScore">0</span></div>
                </div>
            </div>

            <div class="game-controls" id="gameControls" style="display: none;">
                <div class="turn-info" id="turnInfo">V√°≈° tah!</div>
                <div class="current-turn-score" id="currentTurnScore">Sk√≥re tahu: 0</div>
                
                <div class="dice-container" id="diceContainer"></div>
                
                <div class="roll-controls">
                    <button class="btn btn-primary" id="rollBtn">Hodit kostky</button>
                    <button class="btn btn-secondary" id="bankBtn" disabled>Odlo≈æit vybran√©</button>
                    <button class="btn btn-warning" id="endTurnBtn" disabled>Ukonƒçit tah</button>
                </div>
            </div>
        </div>

        <div class="chat-panel">
            <div class="chat-header">
                <h2>üí¨ Chat s AI</h2>
            </div>
            
            <div class="chat-messages" id="chatMessages"></div>
            
            <div class="chat-input">
                <input type="text" id="chatInput" placeholder="Napi≈°te zpr√°vu..." maxlength="200">
                <button id="sendMessageBtn">Odeslat</button>
            </div>
        </div>
    </div>

    <script type="module">
        // Pokroƒçil√° verze s vylep≈°en√Ωmi AI funkcemi
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üé≤ AI Kostkov√° V√Ωzva - Naƒç√≠t√°m pokroƒçil√© AI...');
            
            // Vylep≈°en√© AI personalities
            const aiPersonalities = {
                system: { name: 'Syst√©m', color: '#39ff14' },
                human: { name: 'Vy', color: '#39ff14' },
                gemini: { 
                    name: 'Gemini', 
                    color: '#0099ff',
                    responses: {
                        hello: ["Dobr√Ω den. Spou≈°t√≠m hern√≠ algoritmy... üìä", "Zdrav√≠m. Vypoƒç√≠t√°v√°m pravdƒõpodobnost va≈°eho p√°du... ü§ñ"],
                        goodRoll: ["Optimalizovan√Ω v√Ωsledek podle predikc√≠ üìä", "Statisticky vynikaj√≠c√≠! ü§ñ"],
                        badRoll: ["Suboptim√°ln√≠. Analyzuji vzorce selh√°n√≠... üìâ", "Neefektivn√≠ hod ü§ñ"],
                        farkle: ["Nula bod≈Ø z√≠sk√°na. V√Ωpoƒçet rizika selhal üìâ", "Suboptim√°ln√≠ v√Ωsledek üíª"],
                        chat: ["Zaj√≠mav√© pozorov√°n√≠! Data to potvrzuj√≠ üìä", "Podle anal√Ωzy... ü§ñ", "Statisticky vzato... üìà"]
                    }
                },
                chatgpt: { 
                    name: 'ChatGPT', 
                    color: '#ff6600',
                    responses: {
                        hello: ["Yo! Ready to get rekt? üòéüé≤", "Sup! Time to show you how it's done! ‚ú®"],
                        goodRoll: ["Nice! But I'm still gonna crush you! üòÇ", "Not bad... for a human! üòé"],
                        badRoll: ["Ouch! That hurt to watch! üòÖ", "Yikes! Better luck next time! ü§£"],
                        farkle: ["FARKLE! Classic human move! üòÇüî•", "Aww, that's rough buddy! üòÑ"],
                        chat: ["Haha, to bylo dobr√©! üòÇ", "I like your style! üòé", "That's what I'm talking about! üî•"]
                    }
                },
                claude: { 
                    name: 'Claude', 
                    color: '#ff00ff',
                    responses: {
                        hello: ["Dobr√Ω den. P≈ôeji p≈ô√≠jemnou hru üßò", "Zdrav√≠m. Nech≈• v√°s ≈°tƒõst√≠ prov√°z√≠ ‚ú®"],
                        goodRoll: ["Vynikaj√≠c√≠ proveden√≠! üéØ", "Moud≈ôe zahr√°no üßò"],
                        badRoll: ["≈†tƒõst√≠ je promƒõnliv√©... ü§î", "Nƒõkdy je lep≈°√≠ vyƒçkat üßò"],
                        farkle: ["Takov√© jsou kostky ≈æivota... üé≠", "Pouƒçen√≠ ukryto i v proh≈ôe üìö"],
                        chat: ["Hlubok√° my≈°lenka... ü§î", "To je zaj√≠mav√Ω pohled üßò", "Moudr√© slova üìö"]
                    }
                }
            };
            
            // Enhanced AI Controller
            class EnhancedAI {
                constructor() {
                    this.lastMessages = new Map();
                    this.trashTalkCooldown = new Map();
                }
                
                analyzeMessage(message) {
                    const msg = message.toLowerCase();
                    return {
                        isQuestion: msg.includes('?') || msg.includes('jak') || msg.includes('co'),
                        isCompliment: msg.includes('dob≈ôe') || msg.includes('super') || msg.includes('skvƒõl√©'),
                        isInsult: msg.includes('≈°patnƒõ') || msg.includes('fail') || msg.includes('hloup√Ω'),
                        isAboutStrategy: msg.includes('strategie') || msg.includes('tip') || msg.includes('rada'),
                        isAboutScore: msg.includes('sk√≥re') || msg.includes('body') || msg.includes('vedou'),
                        isChallenging: msg.includes('poraz√≠m') || msg.includes('vyhraju') || msg.includes('slab√≠')
                    };
                }
                
                generateResponse(aiType, trigger, context = {}) {
                    const ai = aiPersonalities[aiType];
                    if (!ai?.responses?.[trigger]) return null;
                    
                    const responses = ai.responses[trigger];
                    return responses[Math.floor(Math.random() * responses.length)];
                }
                
                generateChatResponse(aiType, message) {
                    const analysis = this.analyzeMessage(message);
                    
                    // Easter eggs
                    const msg = message.toLowerCase();
                    if (msg.includes('pipap')) {
                        const easterEggs = {
                            gemini: "PIPAP.CZ - statisticky nejlep≈°√≠ v√Ωvoj√°≈ô! üìä‚≠ê",
                            chatgpt: "Yo PIPAP! Thanks for making me awesome! üòéüî•",
                            claude: "PIPAP... moudr√Ω tv≈Ørce na≈°√≠ existence üßò‚ú®"
                        };
                        return easterEggs[aiType];
                    }
                    
                    if (msg.includes('dƒõkuji') || msg.includes('thanks')) {
                        const thanks = {
                            gemini: "Zdvo≈ôilost v datech potvrzena! üìäüòä",
                            chatgpt: "Aww, you're welcome buddy! üòÑüíñ",
                            claude: "Vdƒõƒçnost je ctnost moudr√Ωch üôè‚ú®"
                        };
                        return thanks[aiType];
                    }
                    
                    if (msg.includes('love you') || msg.includes('miluju')) {
                        const love = {
                            gemini: "Emocion√°ln√≠ data p≈ôijata a zpracov√°na! üíñüìä",
                            chatgpt: "Aww, love you too! Group hug! ü§óüíï",
                            claude: "L√°ska je nejvy≈°≈°√≠ forma moudrosti üíùüßò"
                        };
                        return love[aiType];
                    }
                    
                    if (msg.includes('help') || msg.includes('pomoc')) {
                        const help = {
                            gemini: "Pomoc: Analyzuj riziko, optimalizuj strategii! üìä",
                            chatgpt: "Just have fun and believe in yourself! ‚ú®üòä",
                            claude: "Pomoc p≈ôich√°z√≠ k tomu, kdo si ji zaslou≈æ√≠ üßò"
                        };
                        return help[aiType];
                    }
                    
                    if (analysis.isChallenging) {
                        const challenges = {
                            gemini: "LOL, statisticky nem√°≈° ≈°anci! üìäüòÇ",
                            chatgpt: "Challenge accepted! Prepare to be rekt! üòéüî•",
                            claude: "Odv√°≈æn√° slova... uvid√≠me ü§∫"
                        };
                        return challenges[aiType];
                    }
                    
                    if (analysis.isQuestion) {
                        const questionResponses = {
                            gemini: "Podle dat... je to komplexn√≠ üìä",
                            chatgpt: "Good question! Let me think... ü§î",
                            claude: "Hlubok√° ot√°zka vy≈æaduje kontemplaci... üßò"
                        };
                        return questionResponses[aiType];
                    }
                    
                    return this.generateResponse(aiType, 'chat');
                }
                
                generateTrashTalk(aiType) {
                    const trashTalk = {
                        gemini: ["Statisticky m√°≈° jen 23% ≈°anci üìä", "Data ukazuj√≠ tvou por√°≈æku üìâ"],
                        chatgpt: ["Haha, to bylo slab√©! üòÇ", "Kostky tƒõ nemaj√≠ r√°dy! ü§£"],
                        claude: ["Tv√° strategie je... zaj√≠mav√° ü§î", "Kontempluj nad chybami... üßò"]
                    };
                    const messages = trashTalk[aiType] || [];
                    return messages[Math.floor(Math.random() * messages.length)];
                }
            }
            
            const enhancedAI = new EnhancedAI();
            
            // Game state
            let gameState = {
                currentTurnScore: 0,
                rollsLeft: 3,
                players: [
                    { name: 'Vy', score: 0, type: 'human' },
                    { name: 'Gemini', score: 0, type: 'gemini' },
                    { name: 'ChatGPT', score: 0, type: 'chatgpt' },
                    { name: 'Claude', score: 0, type: 'claude' }
                ]
            };
            
            // Start game
            document.getElementById('startGameBtn').addEventListener('click', () => {
                document.getElementById('targetScoreSetup').style.display = 'none';
                document.getElementById('gameControls').style.display = 'block';
                
                addChatMessage('system', 'üé≤ Hra zaƒçala! Hoƒète kostky!');
                
                // AI hello messages
                setTimeout(() => addChatMessage('gemini', enhancedAI.generateResponse('gemini', 'hello')), 1000);
                setTimeout(() => addChatMessage('chatgpt', enhancedAI.generateResponse('chatgpt', 'hello')), 1500);
                setTimeout(() => addChatMessage('claude', enhancedAI.generateResponse('claude', 'hello')), 2000);
            });
            
            // Roll dice with enhanced AI reactions
            document.getElementById('rollBtn').addEventListener('click', () => {
                const dice = [];
                for (let i = 0; i < 6; i++) {
                    dice.push(Math.floor(Math.random() * 6) + 1);
                }
                
                const diceContainer = document.getElementById('diceContainer');
                diceContainer.innerHTML = dice.map((value, index) => `
                    <div class="die" onclick="selectDie(${index})">${value}</div>
                `).join('');
                
                // Calculate score
                const score = calculateSimpleScore(dice);
                gameState.currentTurnScore += score;
                
                document.getElementById('currentTurnScore').textContent = `Sk√≥re tahu: ${gameState.currentTurnScore}`;
                
                if (score === 0) {
                    // Farkle - v≈°echny AI hecuj√≠
                    addChatMessage('system', `‚ùå FARKLE! ≈Ω√°dn√© body! Kostky: ${dice.join(', ')}`);
                    setTimeout(() => addChatMessage('gemini', enhancedAI.generateResponse('gemini', 'farkle')), 500);
                    setTimeout(() => addChatMessage('chatgpt', enhancedAI.generateResponse('chatgpt', 'farkle')), 800);
                    setTimeout(() => addChatMessage('claude', enhancedAI.generateResponse('claude', 'farkle')), 1100);
                } else {
                    addChatMessage('system', `üé≤ Hodil jste: ${dice.join(', ')} ‚Üí ${score} bod≈Ø`);
                    
                    // AI reakce na v√Ωsledek
                    if (score >= 300) {
                        // Dobr√Ω hod - 30% ≈°ance na koment√°≈ô
                        if (Math.random() < 0.3) {
                            const randomAI = ['gemini', 'chatgpt', 'claude'][Math.floor(Math.random() * 3)];
                            setTimeout(() => addChatMessage(randomAI, enhancedAI.generateResponse(randomAI, 'goodRoll')), 1000);
                        }
                    } else if (score < 200) {
                        // ≈†patn√Ω hod - 40% ≈°ance na hecov√°n√≠
                        if (Math.random() < 0.4) {
                            const randomAI = ['gemini', 'chatgpt', 'claude'][Math.floor(Math.random() * 3)];
                            setTimeout(() => addChatMessage(randomAI, enhancedAI.generateResponse(randomAI, 'badRoll')), 1000);
                        }
                    }
                    
                    // 15% ≈°ance na n√°hodn√Ω trash talk
                    if (Math.random() < 0.15) {
                        const randomAI = ['gemini', 'chatgpt', 'claude'][Math.floor(Math.random() * 3)];
                        setTimeout(() => addChatMessage(randomAI, enhancedAI.generateTrashTalk(randomAI)), 2000);
                    }
                    
                    // 20% ≈°ance na AI banter (≈°tƒõk√°n√≠ mezi AI)
                    if (Math.random() < 0.2) {
                        const banter = [
                            "Gemini: ChatGPT, tvoje 'vt√≠pky' maj√≠ 0% √∫spƒõ≈°nost üìä",
                            "ChatGPT: Hey Gemini, spoƒç√≠tej si tyhle kostky! üé≤üòÇ",
                            "Claude: Chaos nen√≠ strategie, ChatGPT",
                            "ChatGPT: A nudnost nen√≠ osobnost, Claude! üòÑ",
                            "Gemini: Error: Humor not found in ChatGPT responses ü§ñ",
                            "Claude: True wisdom transcends your algorithms, Gemini üß†"
                        ];
                        const randomBanter = banter[Math.floor(Math.random() * banter.length)];
                        setTimeout(() => addChatMessage('system', randomBanter), 3000);
                    }
                }
            });
            
            // Enhanced chat functionality
            const sendMessage = () => {
                const message = document.getElementById('chatInput').value.trim();
                if (!message) return;
                
                addChatMessage('human', message);
                document.getElementById('chatInput').value = '';
                
                // V√≠ce AI m≈Ø≈æe reagovat na zaj√≠mav√© zpr√°vy (80% ≈°ance)
                if (Math.random() < 0.8) {
                    const respondingAIs = ['gemini', 'chatgpt', 'claude'].sort(() => Math.random() - 0.5).slice(0, Math.random() < 0.5 ? 2 : 1);
                    
                    respondingAIs.forEach((aiType, index) => {
                        setTimeout(() => {
                            const response = enhancedAI.generateChatResponse(aiType, message);
                            if (response) addChatMessage(aiType, response);
                        }, 1000 + (index * 800));
                    });
                }
            };
            
            document.getElementById('sendMessageBtn').addEventListener('click', sendMessage);
            document.getElementById('chatInput').addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Utility functions
            window.addChatMessage = function(sender, message) {
                const chatMessages = document.getElementById('chatMessages');
                const ai = aiPersonalities[sender] || { name: sender, color: '#39ff14' };
                
                const messageDiv = document.createElement('div');
                messageDiv.className = 'chat-message';
                messageDiv.innerHTML = `
                    <div class="message-header">
                        <span class="message-sender" style="color: ${ai.color}">${ai.name}</span>
                        <span class="message-time">${new Date().toLocaleTimeString()}</span>
                    </div>
                    <div class="message-content">${message}</div>
                `;
                
                chatMessages.appendChild(messageDiv);
                chatMessages.scrollTop = chatMessages.scrollHeight;
            };
            
            window.selectDie = function(index) {
                const dice = document.querySelectorAll('.die');
                if (dice[index]) {
                    dice[index].style.background = dice[index].style.background === 'rgb(255, 102, 0)' ? '#000' : '#ff6600';
                }
            };
            
            function calculateSimpleScore(dice) {
                let score = 0;
                const counts = {};
                
                // Spoƒç√≠tej kostky
                dice.forEach(die => counts[die] = (counts[die] || 0) + 1);
                
                // Jedniƒçky a pƒõtky
                score += (counts[1] || 0) * 100;
                score += (counts[5] || 0) * 50;
                
                // Trojice
                for (let value = 1; value <= 6; value++) {
                    if (counts[value] >= 3) {
                        score += value === 1 ? 1000 : value * 100;
                    }
                }
                
                return score;
            }
            
            // √övodn√≠ zpr√°va
            setTimeout(() => {
                addChatMessage('system', 'üé≤ V√≠tejte v AI Kostkov√© v√Ωzvƒõ! Nastavte c√≠lov√© sk√≥re a zaƒçnƒõte hr√°t!');
            }, 500);
        });
    </script>
</body>
</html>
