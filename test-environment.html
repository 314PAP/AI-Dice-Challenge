<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test AI Kostkov√° V√Ωzva</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { 
            font-family: Arial, sans-serif; 
            background: #1a1a1a; 
            color: #00ff00; 
            margin: 20px; 
        }
        .test-result { 
            margin: 10px 0; 
            padding: 10px; 
            border: 1px solid #333; 
            border-radius: 5px;
        }
        .success { background-color: #0f2f0f; border-color: #00ff00; }
        .error { background-color: #2f0f0f; border-color: #ff0000; color: #ff0000; }
        .info { background-color: #0f0f2f; border-color: #0099ff; color: #0099ff; }
        .btn-test { 
            background: #00ff00; 
            color: #000; 
            border: none; 
            padding: 10px 20px; 
            margin: 5px; 
            border-radius: 5px; 
            cursor: pointer;
        }
        .btn-test:hover { background: #00cc00; }
    </style>
</head>
<body>
    <div class="container">
        <h1>üé≤ Test AI Kostkov√° V√Ωzva</h1>
        
        <div class="row">
            <div class="col-md-6">
                <h3>Testy funkƒçnosti</h3>
                <div id="testResults"></div>
                
                <div class="mt-3">
                    <button class="btn-test" onclick="runAllTests()">Spustit v≈°echny testy</button>
                    <button class="btn-test" onclick="testTemplateLoading()">Test ≈°ablon</button>
                    <button class="btn-test" onclick="testModuleImports()">Test modul≈Ø</button>
                    <button class="btn-test" onclick="testGameLogic()">Test hern√≠ logiky</button>
                </div>
            </div>
            
            <div class="col-md-6">
                <h3>Rychl√Ω test hry</h3>
                <div id="gameTestArea">
                    <div class="mb-3">
                        <label>C√≠lov√© sk√≥re:</label>
                        <input type="number" id="testTargetScore" value="10000" min="1000" step="1000" class="form-control">
                    </div>
                    <button class="btn-test" onclick="quickGameTest()">Rychl√Ω test hry</button>
                    <div id="gameTestResults"></div>
                </div>
            </div>
        </div>
        
        <div class="mt-4">
            <h3>Konzole</h3>
            <div id="console" style="background: #000; color: #00ff00; padding: 10px; height: 300px; overflow-y: auto; font-family: monospace; font-size: 12px;"></div>
        </div>
    </div>
    
    <script>
        // P≈ôesmƒõrov√°n√≠ console.log do vizu√°ln√≠ konzole
        const consoleDiv = document.getElementById('console');
        const originalLog = console.log;
        const originalError = console.error;
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #00ff00;">LOG: ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            consoleDiv.innerHTML += '<div style="color: #ff0000;">ERROR: ' + args.join(' ') + '</div>';
            consoleDiv.scrollTop = consoleDiv.scrollHeight;
        };
        
        // Funkce pro p≈ôid√°n√≠ v√Ωsledku testu
        function addTestResult(message, type = 'info') {
            const div = document.createElement('div');
            div.className = `test-result ${type}`;
            div.textContent = message;
            document.getElementById('testResults').appendChild(div);
            console.log(`[${type.toUpperCase()}] ${message}`);
        }
        
        // Test naƒç√≠t√°n√≠ ≈°ablon
        async function testTemplateLoading() {
            addTestResult('=== TEST NAƒå√çT√ÅN√ç ≈†ABLON ===', 'info');
            
            const templates = [
                '/src/templates/game-menu.html',
                '/src/templates/game-controls.html',
                '/src/templates/game-controls-mobile.html',
                '/src/templates/chat.html',
                '/src/templates/chat-mobile-bootstrap.html'
            ];
            
            for (const template of templates) {
                try {
                    const response = await fetch(template);
                    if (response.ok) {
                        const content = await response.text();
                        addTestResult(`‚úÖ ${template} (${content.length} znak≈Ø)`, 'success');
                    } else {
                        addTestResult(`‚ùå ${template} - HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addTestResult(`‚ùå ${template} - ${error.message}`, 'error');
                }
            }
        }
        
        // Test importu modul≈Ø
        async function testModuleImports() {
            addTestResult('=== TEST IMPORTU MODUL≈Æ ===', 'info');
            
            const modules = [
                '/src/js/game/gameState.js',
                '/src/js/ui/menuButtonHandlers.js',
                '/src/js/game/controllers/gameFlowController.js',
                '/src/js/ui/gameUI.js'
            ];
            
            for (const module of modules) {
                try {
                    const response = await fetch(module);
                    if (response.ok) {
                        addTestResult(`‚úÖ ${module} - dostupn√Ω`, 'success');
                    } else {
                        addTestResult(`‚ùå ${module} - HTTP ${response.status}`, 'error');
                    }
                } catch (error) {
                    addTestResult(`‚ùå ${module} - ${error.message}`, 'error');
                }
            }
        }
        
        // Test hern√≠ logiky
        async function testGameLogic() {
            addTestResult('=== TEST HERN√ç LOGIKY ===', 'info');
            
            try {
                // Test z√°kladn√≠ch funkc√≠
                const mockGameState = {
                    targetScore: 10000,
                    gameStarted: false,
                    currentPlayer: 0,
                    players: [
                        { name: 'Test Player', score: 0 }
                    ]
                };
                
                addTestResult('‚úÖ Mock gameState vytvo≈ôen', 'success');
                
                // Test validace target score
                const targetScore = 10000;
                if (targetScore >= 1000) {
                    addTestResult('‚úÖ Target score validace pro≈°la', 'success');
                } else {
                    addTestResult('‚ùå Target score validace selhala', 'error');
                }
                
                // Test hodu kostkami
                const diceRoll = [];
                for (let i = 0; i < 6; i++) {
                    diceRoll.push(Math.floor(Math.random() * 6) + 1);
                }
                
                addTestResult(`‚úÖ Simulace hodu kostek: ${diceRoll.join(', ')}`, 'success');
                
            } catch (error) {
                addTestResult(`‚ùå Chyba v hern√≠ logice: ${error.message}`, 'error');
            }
        }
        
        // Rychl√Ω test hry
        function quickGameTest() {
            const targetScore = document.getElementById('testTargetScore').value;
            const resultsDiv = document.getElementById('gameTestResults');
            
            resultsDiv.innerHTML = '';
            
            if (targetScore < 1000) {
                resultsDiv.innerHTML = '<div class="test-result error">‚ùå C√≠lov√© sk√≥re mus√≠ b√Ωt alespo≈à 1000</div>';
                return;
            }
            
            resultsDiv.innerHTML = `
                <div class="test-result success">‚úÖ C√≠lov√© sk√≥re: ${targetScore}</div>
                <div class="test-result info">üéÆ Simulace spu≈°tƒõn√≠ hry...</div>
                <div class="test-result success">‚úÖ Hra by byla spu≈°tƒõna s c√≠lem ${targetScore} bod≈Ø</div>
            `;
            
            console.log('Rychl√Ω test hry dokonƒçen');
        }
        
        // Spu≈°tƒõn√≠ v≈°ech test≈Ø
        async function runAllTests() {
            document.getElementById('testResults').innerHTML = '';
            
            await testTemplateLoading();
            await testModuleImports();
            await testGameLogic();
            
            addTestResult('=== V≈†ECHNY TESTY DOKONƒåENY ===', 'info');
        }
        
        // Automatick√© spu≈°tƒõn√≠ test≈Ø po naƒçten√≠
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Test str√°nka naƒçtena');
            addTestResult('Test prost≈ôed√≠ p≈ôipraveno', 'success');
        });
    </script>
</body>
</html>
