/**
 * Super plynulá responzivita pro AI Kostkovou Výzvu
 *
 * Tento soubor implementuje vylepšené plynulé responzivní chování pomocí kombinace:
 * 1. CSS Flexbox pro pružné rozložení
 * 2. CSS proměnných a calc() pro dynamické výpočty velikostí
 * 3. Gradientních media queries místo ostrých přechodů
 * 4. Relativních jednotek (vh, vw, %, rem) místo fixních (px)
 * 5. Konzistentního paddingu a mezery ve všech zobrazeních
 */

/* ====== GLOBÁLNÍ NASTAVENÍ A CSS PROMĚNNÉ ====== */
:root {
  /* Základní velikosti - dynamicky se mění s velikostí viewportu */
  --base-unit: clamp(0.5rem, calc(0.5rem + 1vh), 1.5rem);
  
  /* Odvozené proměnné pro konzistentní spacing v celé aplikaci */
  --container-padding: var(--base-unit);
  --content-gap: calc(var(--base-unit) * 0.75);
  --element-padding: calc(var(--base-unit) * 0.5);
  --small-gap: calc(var(--base-unit) * 0.25);
  
  /* Konzistentní rámečky */
  --border-width: clamp(1px, calc(0.1rem + 0.1vh), 2px);
  --border-radius: clamp(0.25rem, calc(0.25rem + 0.5vh), 0.75rem);
  
  /* Minimální výšky pro interaktivní prvky */
  --min-button-height: clamp(2rem, calc(1.5rem + 2vh), 3.5rem);
  --input-height: calc(var(--min-button-height) * 0.85);
  
  /* Barvy a efekty */
  --neon-green: #39ff14;
  --neon-glow: 0 0 5px var(--neon-green), 0 0 10px var(--neon-green);
  
  /* Responzivní vlastnosti pro malá zařízení */
  --button-font-size: clamp(0.7rem, calc(0.6rem + 0.4vh + 0.3vw), 1rem);
  --header-font-size: clamp(0.8rem, calc(0.7rem + 0.5vh + 0.4vw), 1.2rem);
}

/* ====== ZÁKLADNÍ NASTAVENÍ STRÁNKY ====== */
body {
  overflow-x: hidden;
  background-color: black;
  margin: 0;
  padding: 0;
  width: 100vw;
  height: 100vh;
}

/* ====== SPOLEČNÁ PRAVIDLA PRO VŠECHNY VELIKOSTI OBRAZOVKY ====== */

/* Hlavní kontejnery - společné vlastnosti */
.container-fluid.mw-90.mh-90.vh-90 {
  margin: auto;
  box-sizing: border-box;
  border-radius: var(--border-radius);
  border: var(--border-width) solid var(--neon-green);
  box-shadow: var(--neon-glow);
  padding: var(--container-padding);
  max-width: 90vw;
  max-height: 90vh;
  
  /* Plynulá změna paddingu s velikostí viewportu */
  transition: padding 0.3s ease;
}

/* Vnější rámeček kolem celé aplikace */
.outer-neon-border {
  border: calc(var(--border-width) * 2) solid var(--neon-green);
  box-shadow: var(--neon-glow);
  border-radius: var(--border-radius);
  padding: var(--container-padding);
  margin: auto;
  background-color: rgba(0, 0, 0, 0.9);
}  /* Herní box a chat kontejner - konzistentní styly */
.game-box, .chat-container, #chatPanelMobile {
  padding: var(--element-padding);
  background-color: rgba(0, 0, 0, 0.9);
  transition: padding 0.3s ease;
}

/* Aplikujeme rámečky na herní boxy na všech zařízeních */
.game-box, #chatPanelMobile {
  border: var(--border-width) solid var(--neon-green);
  border-radius: var(--border-radius);
  box-shadow: var(--neon-glow);
}

/* Chat kontejner bez vnitřního rámečku, ale s glow efektem při hover */
/* Chat container - bez okrajů (vnitřní div) */
.chat-container {
  border: none !important;
  box-shadow: none !important;
  border-radius: var(--border-radius);
  transition: box-shadow 0.3s ease;
}

/* Konsistentní mezery mezi řádky */
.row + .row {
  margin-top: var(--content-gap);
}

/* Tlačítka - plně responzivní */
.btn-neon {
  min-height: var(--min-button-height);
  padding: var(--small-gap) var(--element-padding);
  margin-bottom: var(--small-gap);
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: calc(var(--border-radius) * 0.8);
  
  /* Plynulá změna velikosti */
  transition: min-height 0.3s ease, padding 0.3s ease;
}

/* ====== MOBILNÍ LAYOUT ====== */
@media (max-width: 767.98px) {
  /* Zajištění, že desktopový layout je skutečně skrytý */
  .container-fluid.d-none.d-md-block {
    display: none !important;
    position: absolute;
    visibility: hidden;
    width: 0;
    height: 0;
    overflow: hidden;
  }
  
  /* Mobilní kontejner - flexbox pro plynulé přizpůsobení - bez vnějšího rámečku */
  .container-fluid.d-block.d-md-none.mw-90.mh-90.vh-90 {
    display: flex !important;
    flex-direction: column;
    height: 90vh;
    width: 90vw;
    padding: var(--container-padding);
    gap: var(--content-gap);
    border: none; /* Odebráno orámování kontejneru */
    box-shadow: none;
    background-color: transparent;
  }
  
  /* Rozdělení obrazovky na dva panely s flexibilním poměrem pro portrét */
  .row.g-0.h-75 {
    flex: 3;
    min-height: 0;
    margin-bottom: 0;
  }
  
  .row.g-0.h-20 {
    flex: 1;
    min-height: min(100px, 20vh);
    max-height: 30vh;
  }
  
  /* Zajištění plné výšky pro kontejnery */
  .row.g-0.h-75 .col-12,
  .row.g-0.h-75 .col-12 > .game-box,
  .row.g-0.h-20 .col-12,
  .row.g-0.h-20 .col-12 > .chat-container,
  #gameMobileContent,
  #chatPanelMobile {
    height: 100% !important;
  }
  
  /* Mobilní menu - plně responzivní a flexibilní */
  .game-header.d-block.d-md-none {
    padding: var(--element-padding);
    display: flex;
    flex-direction: column;
    height: 100%;
    gap: var(--small-gap);
    overflow: hidden; /* Zabrání přetečení obsahu */
    justify-content: space-between; /* Lepší rozložení obsahu */
  }
  
  /* Nadpisy a texty - plynulá změna velikosti s lepší responzivitou na výšku */
  .game-title {
    font-size: clamp(0.8rem, calc(0.6rem + 1.5vh + 0.5vw), 1.5rem);
    margin-bottom: var(--small-gap);
    white-space: nowrap; /* Zabrání zalomení textu */
  }
  
  .score-label {
    font-size: clamp(0.6rem, calc(0.5rem + 0.8vh + 0.3vw), 1rem);
    margin-bottom: var(--small-gap);
  }
  
  /* Menu tlačítka - responzivní velikost a mezery s lepší adaptací na výšku */
  .menu-buttons {
    display: flex;
    flex-direction: column;
    gap: clamp(0.15rem, calc(0.1rem + 0.4vh), 0.5rem); /* Vylepšená dynamická mezera */
    flex: 1;
    justify-content: center;
    padding: clamp(0.1rem, calc(0.1rem + 0.3vh), 0.4rem) 0;
    overflow-y: auto; /* Pro velmi malé výšky, umožní scrollování */
    min-height: 0; /* Důležité pro správné chování flexboxu */
  }
  
  .menu-buttons .btn {
    width: clamp(75%, calc(70% + 1vw), 90%);
    margin-left: auto;
    margin-right: auto;
    flex-shrink: 0;
    font-size: clamp(0.7rem, calc(0.5rem + 0.5vh + 0.3vw), 1rem); /* Více reaguje na výšku */
    padding-top: clamp(0.15rem, 0.25vh, 0.35rem);
    padding-bottom: clamp(0.15rem, 0.25vh, 0.35rem);
    min-height: clamp(1.8rem, calc(1.5rem + 1.5vh), 3rem); /* Konzistentnější výška */
    transition: all 0.2s ease; /* Plynulá animace změny velikosti */
  }
  
  /* Vstupní pole - konzistentní velikost */
  .target-score-input input {
    height: var(--input-height);
    font-size: clamp(0.8rem, calc(0.7rem + 0.5vw), 1rem);
    border-radius: calc(var(--border-radius) * 0.7); /* Konzistentní zaoblení */
    border: var(--border-width) solid var(--neon-green); /* Konzistentní rámeček */
  }
  
  /* Mobilní chat - plynulá responzivita */
  .chat-container {
    height: 100% !important;
    display: flex;
    flex-direction: column;
    padding: var(--element-padding);
    overflow: hidden; /* Zabrání přetečení obsahu */
  }
  
  .chat-header {
    padding: clamp(0.15rem, calc(0.15rem + 0.3vh), 0.35rem);
    font-size: clamp(0.7rem, calc(0.6rem + 0.5vh + 0.3vw), 1.2rem);
    margin-bottom: calc(var(--small-gap) * 0.5); /* Konzistentní mezera */
  }
  
  .chat-messages {
    flex: 1;
    overflow-y: auto;
    min-height: 0;
    padding: clamp(0.15rem, calc(0.15rem + 0.2vh), 0.35rem);
    font-size: clamp(0.7rem, calc(0.6rem + 0.3vh + 0.2vw), 1rem);
    margin-bottom: calc(var(--small-gap) * 0.75); /* Konzistentní mezera před input polem */
  }
  
  .chat-input {
    padding: clamp(0.15rem, calc(0.15rem + 0.2vh), 0.35rem);
    min-height: clamp(2.2rem, calc(2rem + 1vh), 3rem); /* Zajištění minimální výšky */
  }
  
  .chat-input .form-control, #chatInputMobile {
    height: clamp(1.8rem, calc(1.5rem + 1vh), 2.5rem); /* Konzistentnější výška inputu */
    font-size: clamp(0.7rem, calc(0.6rem + 0.3vh + 0.2vw), 1rem); /* Responsivní font */
    border-radius: calc(var(--border-radius) * 0.7); /* Konzistentní zaoblení */
  }
  
  .chat-message {
    margin-bottom: clamp(0.15rem, 0.25vh, 0.35rem);
    line-height: 1.3; /* Lepší čitelnost */
  }
  
  /* Speciální pravidla pro velmi malé výšky */
  @media (max-height: 600px) {
    /* Zmenšení fontů a mezer pro lepší přizpůsobení */
    .game-title {
      font-size: clamp(0.6rem, calc(0.4rem + 1.2vh), 1rem);
      margin-bottom: calc(var(--small-gap) * 0.5);
      white-space: nowrap; /* Zabránit zalomení na více řádků */
    }
    
    .score-label {
      font-size: clamp(0.5rem, calc(0.3rem + 0.8vh), 0.8rem);
      margin-bottom: calc(var(--small-gap) * 0.5);
    }
    
    /* Kompaktnější tlačítka */
    .menu-buttons {
      gap: calc(var(--small-gap) * 0.5);
      justify-content: flex-start; /* Zarovnání na začátek v případě přetečení */
      padding-top: calc(var(--small-gap) * 0.25); /* Menší horní padding */
    }
    
    .menu-buttons .btn {
      min-height: clamp(1.5rem, calc(1rem + 1.2vh), 2rem); /* Trochu větší minimální výška */
      margin-bottom: 0;
      padding: calc(var(--small-gap) * 0.5);
      font-size: clamp(0.6rem, calc(0.4rem + 0.8vh), 0.9rem);
    }
    
    /* Menší mezery a padding v hlavním kontejneru */
    .container-fluid.d-block.d-md-none.mw-90.mh-90.vh-90 {
      gap: clamp(0.15rem, 0.25vh, 0.4rem);
      padding: clamp(0.2rem, 0.3vh, 0.6rem);
    }
    
    /* Úpravy pro úsporu místa */
    .neon-dice-decoration {
      display: none; /* Skryjeme ikonu pro úsporu místa */
    }
    
    /* Menší padding pro všechny boxy */
    .game-box, .chat-container, #chatPanelMobile {
      padding: clamp(0.2rem, 0.3vh, 0.5rem);
    }
    
    /* Optimalizace velikosti vstupního pole */
    .target-score-input input {
      height: clamp(1.5rem, calc(1rem + 1.2vh), 2.2rem);
      padding: 0.1rem;
    }
    
    /* Optimalizace chatu pro malou výšku */
    .chat-header {
      padding: 0.1rem;
    }
    
    .chat-messages {
      padding: 0.1rem;
      max-height: calc(100% - 2.2rem); /* Zachování prostoru pro vstupní pole */
    }
    
    .chat-input {
      min-height: clamp(1.8rem, calc(1.5rem + 0.8vh), 2.2rem);
    }
  }
  
  /* Speciální pravidla pro velmi malé šířky */
  @media (max-width: 350px) {
    .menu-buttons .btn {
      width: 95%;
      font-size: clamp(0.6rem, calc(0.5rem + 0.3vw), 0.8rem);
    }
    
    :root {
      --base-unit: clamp(0.3rem, calc(0.3rem + 0.5vh), 0.8rem);
    }
  }
  
  /* Speciální pravidla pro landscape orientaci na mobilních zařízeních */
  @media (max-width: 767.98px) and (orientation: landscape) {
    /* Změna layoutu na horizontální - menu a chat vedle sebe */
    .container-fluid.d-block.d-md-none.mw-90.mh-90.vh-90 {
      flex-direction: row;
      height: 90vh;
      padding: var(--element-padding);
      gap: calc(var(--element-padding) * 1.5); /* Větší mezera mezi menu a chatem */
      align-items: stretch; /* Rozšíření obou boxů na plnou výšku */
    }
    
    /* Menu vlevo */
    .row.g-0.h-75 {
      flex: 1.5;
      height: 100%;
      margin-right: 0;
      margin-bottom: 0;
    }
    
    /* Chat vpravo */
    .row.g-0.h-20 {
      flex: 1;
      height: 100%;
      max-height: none;
      min-height: auto;
    }
    
    /* Zajištění správného paddingu v landscape módu */
    .game-box, .chat-container {
      padding: var(--element-padding);
    }
    
    /* Optimalizace menu tlačítek pro landscape mód */
    .menu-buttons {
      gap: clamp(0.1rem, 0.2vh, 0.3rem);
    }
    
    .menu-buttons .btn {
      min-height: clamp(1.5rem, calc(1.2rem + 1vh), 2rem);
      width: clamp(60%, calc(55% + 1vw), 85%);
    }
    
    .game-title {
      font-size: clamp(0.7rem, calc(0.6rem + 0.5vh + 0.3vw), 1.2rem);
    }
    
    /* Kompaktnější chat pro landscape mód */
    .chat-header {
      padding: calc(var(--small-gap) * 0.75);
    }
    
    .chat-messages {
      padding: calc(var(--small-gap) * 0.75);
    }
  }
}

/* ====== DESKTOP LAYOUT ====== */
@media (min-width: 768px) {
  /* Zajištění, že mobilní layout je skutečně skrytý */
  .container-fluid.d-block.d-md-none {
    display: none !important;
    position: absolute;
    visibility: hidden;
    width: 0;
    height: 0;
    overflow: hidden;
  }
  
  /* Desktop kontejner - grid layout */
  .container-fluid.d-none.d-md-block.mw-90.mh-90.vh-90 {
    display: block !important;
    height: 90vh;
    padding: var(--container-padding);
  }
  
  /* Nadpisy a texty - desktop velikosti */
  .game-title {
    font-size: clamp(1.2rem, calc(1rem + 1.5vw), 2rem);
    margin-bottom: var(--content-gap);
  }
  
  .score-label {
    font-size: clamp(0.9rem, calc(0.8rem + 0.8vw), 1.3rem);
    margin-bottom: var(--small-gap);
  }
  
  /* Desktop tlačítka */
  .menu-buttons .btn {
    width: clamp(60%, calc(55% + 1vw), 80%);
    margin-left: auto;
    margin-right: auto;
    min-height: var(--min-button-height);
  }
  
  /* Mezera mezi sloupci na desktopu */
  .g-3 {
    gap: var(--content-gap) !important;
  }
}

/* ====== POMOCNÉ UTILITY TŘÍDY ====== */
.d-flex-center {
  display: flex;
  justify-content: center;
  align-items: center;
}

.flex-grow-1 {
  flex-grow: 1;
}

.overflow-hidden {
  overflow: hidden;
}

.p-consistent {
  padding: var(--element-padding);
}

.gap-consistent {
  gap: var(--content-gap);
}
