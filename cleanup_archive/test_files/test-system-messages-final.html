<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test systémových zpráv - Finální verze</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="src/styles/base/variables.css" rel="stylesheet">
    <link href="src/styles/components/neon-effects.css" rel="stylesheet">
    <link href="src/styles/utils/neon-bootstrap-utilities.css" rel="stylesheet">
    <link href="src/styles/components/bootstrap-responsive.css" rel="stylesheet">
    <link href="src/styles/components/chat.css" rel="stylesheet">
    <link href="src/styles/components/super-responsive-layout.css" rel="stylesheet">
</head>
<body class="bg-dark text-white">
    <div class="container-fluid p-3">
        <h1 class="text-center mb-4 neon-green">🧪 Test systémových zpráv</h1>
        
        <div class="row">
            <div class="col-md-6">
                <div class="card bg-dark border-primary">
                    <div class="card-header">
                        <h5 class="neon-blue">Desktop Chat</h5>
                    </div>
                    <div class="card-body">
                        <div id="chatMessages" class="chat-messages p-3 border border-secondary rounded" style="height: 400px; overflow-y: auto;"></div>
                        <div class="input-group mt-3">
                            <input type="text" id="chatInput" class="form-control bg-dark text-white border-secondary" placeholder="Napište systémovou zprávu...">
                            <button class="btn btn-outline-primary" onclick="testSystemMessage()">Odeslat systémovou zprávu</button>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="col-md-6">
                <div class="card bg-dark border-success">
                    <div class="card-header">
                        <h5 class="neon-green">Mobile Chat</h5>
                    </div>
                    <div class="card-body">
                        <div id="chatMessagesMobile" class="chat-messages p-3 border border-secondary rounded" style="height: 400px; overflow-y: auto;"></div>
                        <div class="input-group mt-3">
                            <input type="text" id="chatInputMobile" class="form-control bg-dark text-white border-secondary" placeholder="Napište AI zprávu...">
                            <button class="btn btn-outline-success" onclick="testAIMessage()">Odeslat AI zprávu</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card bg-dark border-warning">
                    <div class="card-header">
                        <h5 class="neon-yellow">Kontrola barev</h5>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-md-3">
                                <p class="neon-yellow">🟡 Žlutá (.neon-yellow)</p>
                                <p class="neon-green">🟢 Zelená (.neon-green)</p>
                                <p class="neon-blue">🔵 Modrá (.neon-blue)</p>
                                <p class="neon-red">🔴 Červená (.neon-red)</p>
                            </div>
                            <div class="col-md-9">
                                <div class="test-buttons">
                                    <button class="btn btn-sm btn-outline-warning me-2" onclick="testSystemMessage()">Test systémové zprávy</button>
                                    <button class="btn btn-sm btn-outline-success me-2" onclick="testPlayerMessage()">Test hráčské zprávy</button>
                                    <button class="btn btn-sm btn-outline-info me-2" onclick="testAIMessage()">Test AI zprávy</button>
                                    <button class="btn btn-sm btn-outline-danger me-2" onclick="testErrorMessage()">Test chybové zprávy</button>
                                    <button class="btn btn-sm btn-outline-secondary" onclick="clearChat()">Vyčistit chat</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="row mt-4">
            <div class="col-12">
                <div class="card bg-dark border-info">
                    <div class="card-header">
                        <h5 class="neon-blue">Výsledky testů</h5>
                    </div>
                    <div class="card-body">
                        <div id="testResults" class="test-results">
                            <p class="text-muted">Klikněte na tlačítka pro testování...</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="src/main-bootstrap.js"></script>
    <script src="src/js/main.js"></script>
    <script>
        let testCounter = 0;
        
        function testSystemMessage() {
            testCounter++;
            const message = `Systémová zpráva #${testCounter} - má být ŽLUTÁ! 🟡`;
            
            // Test přes proxy funkci
            window.addChatMessage('system', message);
            
            // Přidání výsledku testu
            addTestResult('system', 'Systémová zpráva', 'neon-yellow', 'žlutá');
            
            console.log(`System message test #${testCounter}: ${message}`);
        }
        
        function testPlayerMessage() {
            testCounter++;
            const message = `Hráčská zpráva #${testCounter} - má být ZELENÁ! 🟢`;
            
            // Test přes proxy funkci
            window.addChatMessage('player', message);
            
            // Přidání výsledku testu
            addTestResult('player', 'Hráčská zpráva', 'neon-green', 'zelená');
            
            console.log(`Player message test #${testCounter}: ${message}`);
        }
        
        function testAIMessage() {
            testCounter++;
            const message = `AI zpráva #${testCounter} - má být MODRÁ! 🔵`;
            
            // Test přes bootstrap funkci přímo
            window.addChatMessageBootstrap('AI-Beta', message, 'ai', 'neon-blue');
            
            // Přidání výsledku testu
            addTestResult('ai', 'AI zpráva', 'neon-blue', 'modrá');
            
            console.log(`AI message test #${testCounter}: ${message}`);
        }
        
        function testErrorMessage() {
            testCounter++;
            const message = `Chybová zpráva #${testCounter} - má být ČERVENÁ! 🔴`;
            
            // Test přes bootstrap funkci
            window.addChatMessageBootstrap('Chyba', message, 'error');
            
            // Přidání výsledku testu
            addTestResult('error', 'Chybová zpráva', 'neon-red', 'červená');
            
            console.log(`Error message test #${testCounter}: ${message}`);
        }
        
        function addTestResult(type, description, cssClass, expectedColor) {
            const resultsDiv = document.getElementById('testResults');
            const timestamp = new Date().toLocaleTimeString();
            
            const resultHTML = `
                <div class="test-result border-start border-3 border-${type === 'system' ? 'warning' : type === 'player' ? 'success' : type === 'ai' ? 'info' : 'danger'} ps-3 mb-2">
                    <small class="text-muted">${timestamp}</small><br>
                    <strong>${description}</strong> - očekávaná barva: <span class="${cssClass}">${expectedColor}</span>
                </div>
            `;
            
            resultsDiv.innerHTML = resultHTML + resultsDiv.innerHTML;
        }
        
        function clearChat() {
            document.getElementById('chatMessages').innerHTML = '';
            document.getElementById('chatMessagesMobile').innerHTML = '';
            document.getElementById('testResults').innerHTML = '<p class="text-muted">Chat vyčištěn. Klikněte na tlačítka pro testování...</p>';
            testCounter = 0;
        }
        
        // Automatický test při načtení stránky
        document.addEventListener('DOMContentLoaded', function() {
            console.log('Test systémových zpráv se spouští...');
            
            // Počáteční testy
            setTimeout(() => {
                testSystemMessage();
                console.log('Systémová zpráva vygenerována - zkontrolujte barvu!');
            }, 500);
            
            setTimeout(() => {
                testPlayerMessage();
                console.log('Hráčská zpráva vygenerována - zkontrolujte barvu!');
            }, 1000);
            
            setTimeout(() => {
                testAIMessage();
                console.log('AI zpráva vygenerována - zkontrolujte barvu!');
            }, 1500);
            
            // Ověření CSS načtení
            const testElement = document.createElement('div');
            testElement.className = 'neon-yellow';
            testElement.style.visibility = 'hidden';
            document.body.appendChild(testElement);
            
            const computedStyle = window.getComputedStyle(testElement);
            const color = computedStyle.color;
            
            console.log('CSS test - .neon-yellow color:', color);
            console.log('CSS test - .neon-yellow text-shadow:', computedStyle.textShadow);
            
            document.body.removeChild(testElement);
        });
        
        // Poslouchání chyb
        window.addEventListener('error', function(e) {
            console.error('Chyba při testování:', e.error);
            addTestResult('error', 'Chyba v JavaScriptu', 'neon-red', 'červená');
        });
    </script>
</body>
</html>
