<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîß TEST - System zpr√°vy ≈ælut√©</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- CSS v p≈ôesn√©m po≈ôad√≠ jako v hlavn√≠ aplikaci -->
    <link rel="stylesheet" href="/src/styles/main-optimized.css">
    <link rel="stylesheet" href="/src/styles/variables/colors.css">
    <link rel="stylesheet" href="/src/styles/variables/sizes.css">
    <link rel="stylesheet" href="/src/styles/variables/animations.css">
    <link rel="stylesheet" href="/src/styles/components/neon-effects.css">
    <link rel="stylesheet" href="/src/styles/components/game-menu.css">
    <link rel="stylesheet" href="/src/styles/components/game-controls.css">
    <link rel="stylesheet" href="/src/styles/components/chat.css">
    <link rel="stylesheet" href="/src/styles/components/modals.css">
    <link rel="stylesheet" href="/src/styles/utils/minimalist-layout.css">
    <link rel="stylesheet" href="/src/styles/utils/neon-bootstrap-utilities.css">
    <link rel="stylesheet" href="/src/styles/components/bootstrap-responsive.css">
    <link rel="stylesheet" href="/src/styles/components/super-responsive-layout.css">
    
    <style>
        body {
            background-color: black;
            color: white;
            font-family: 'Orbitron', monospace;
            padding: 20px;
        }
        .test-container {
            border: 2px solid #39ff14;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            background-color: rgba(0, 0, 0, 0.9);
        }
        .button-test {
            margin: 10px;
            padding: 10px 15px;
            background-color: #333;
            border: 1px solid #39ff14;
            color: #39ff14;
            border-radius: 5px;
            cursor: pointer;
        }
        .button-test:hover {
            background-color: #39ff14;
            color: black;
        }
        .demo-chat {
            width: 400px;
            height: 300px;
            margin: 20px auto;
            border: 1px solid #333;
            border-radius: 10px;
            background-color: rgba(0, 0, 0, 0.95);
        }
        .status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            background-color: rgba(0, 0, 0, 0.8);
        }
        .pass {
            border-left: 4px solid #39ff14;
            color: #39ff14;
        }
        .fail {
            border-left: 4px solid #ff3131;
            color: #ff3131;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1 class="text-center" style="color: #39ff14; text-shadow: 0 0 15px #39ff14;">
            üîß TEST - System zpr√°vy ≈ΩLUT√â
        </h1>
        
        <div class="test-container">
            <h3 style="color: #39ff14;">üéØ Identifikace probl√©mu:</h3>
            <div class="status pass">
                ‚úÖ Probl√©m: Existovaly 2 funkce addChatMessage s r≈Øzn√Ωmi parametry
            </div>
            <div class="status pass">
                ‚úÖ main.js: addChatMessage(sender, message, isGameEvent)
            </div>
            <div class="status pass">
                ‚úÖ main-bootstrap.js: addChatMessage(sender, message, type, customColor)
            </div>
            <div class="status pass">
                ‚úÖ Oprava: P≈ôejmenov√°n√≠ a spr√°vn√© mapov√°n√≠ funkc√≠
            </div>
        </div>
        
        <div class="test-container">
            <h3 style="color: #39ff14;">üß™ Interaktivn√≠ test:</h3>
            <div class="text-center">
                <button class="button-test" onclick="testSystemMessage()">
                    üü° P≈ôidat syst√©movou zpr√°vu (m√° b√Ωt ≈ΩLUT√Å)
                </button>
                <button class="button-test" onclick="testPlayerMessage()">
                    üü¢ P≈ôidat hr√°ƒçskou zpr√°vu (m√° b√Ωt ZELEN√Å)
                </button>
                <button class="button-test" onclick="testAIMessage()">
                    üîµ P≈ôidat AI zpr√°vu (m√° b√Ωt MODR√Å)
                </button>
                <button class="button-test" onclick="clearChat()">
                    üóëÔ∏è Vyƒçistit chat
                </button>
            </div>
        </div>
        
        <div class="test-container">
            <h3 style="color: #39ff14;">üí¨ Demo Chat:</h3>
            <div class="demo-chat">
                <div class="chat-container bg-dark-90 rounded-3 d-flex flex-column h-100">
                    <div class="chat-header d-flex justify-content-center align-items-center p-2">
                        <h4 class="neon-text neon-green m-0">
                            <i class="ri-message-3-line me-1"></i>TEST CHAT
                        </h4>
                    </div>
                    
                    <div class="chat-messages flex-grow-1 p-2 overflow-auto" id="testChatMessages">
                        <div class="chat-message mb-2">
                            <strong class="neon-yellow">Syst√©m:</strong> 
                            <span class="neon-yellow">Testovac√≠ syst√©mov√° zpr√°va - mƒõla by b√Ωt ≈ΩLUT√Å!</span>
                        </div>
                    </div>
                    
                    <div class="chat-input p-2 bg-dark-90">
                        <div class="input-group input-group-sm">
                            <input type="text" class="form-control border-0 bg-black text-white" placeholder="Test zpr√°va..." id="testInput">
                            <button class="btn border-0 bg-transparent" type="button" onclick="sendTestMessage()">
                                <i class="ri-send-plane-fill" style="color: #39ff14;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="test-container">
            <h3 style="color: #39ff14;">üìä Testovac√≠ v√Ωsledky:</h3>
            <div id="testResults">
                <div class="status">‚è≥ Spus≈•te test tlaƒç√≠tky v√Ω≈°e...</div>
            </div>
        </div>
        
        <div class="test-container">
            <h3 style="color: #39ff14;">üîó Odkazy:</h3>
            <div class="text-center">
                <a href="http://localhost:5174" class="btn btn-outline-success me-2">
                    <i class="ri-home-line"></i> Hlavn√≠ aplikace
                </a>
                <a href="http://localhost:5174/test-final-chat-fix.html" class="btn btn-outline-info">
                    <i class="ri-test-tube-line"></i> Fin√°ln√≠ test
                </a>
            </div>
        </div>
    </div>
    
    <!-- Naƒçten√≠ JavaScriptu -->
    <script src="/src/main-bootstrap.js"></script>
    <script src="/src/js/main.js" type="module"></script>
    
    <script>
        let testCounter = 0;
        
        function updateTestResults(message, isSuccess = true) {
            const results = document.getElementById('testResults');
            const statusClass = isSuccess ? 'pass' : 'fail';
            const icon = isSuccess ? '‚úÖ' : '‚ùå';
            
            results.innerHTML += `<div class="status ${statusClass}">${icon} ${message}</div>`;
        }
        
        function testSystemMessage() {
            testCounter++;
            try {
                if (typeof window.addChatMessage === 'function') {
                    // Test vol√°n√≠, kter√© d≈ô√≠ve dƒõlalo probl√©my
                    window.addChatMessage('system', `Test syst√©mov√© zpr√°vy #${testCounter} - m√° b√Ωt ≈ΩLUT√Å!`);
                    updateTestResults(`Syst√©mov√° zpr√°va #${testCounter} p≈ôid√°na - zkontrolujte barvu v chatu n√≠≈æe`, true);
                } else {
                    updateTestResults('Funkce addChatMessage nen√≠ dostupn√°', false);
                }
            } catch (error) {
                updateTestResults(`Chyba p≈ôi p≈ôid√°v√°n√≠ syst√©mov√© zpr√°vy: ${error.message}`, false);
            }
        }
        
        function testPlayerMessage() {
            testCounter++;
            try {
                if (typeof window.addChatMessage === 'function') {
                    window.addChatMessage('Hr√°ƒç', `Test hr√°ƒçsk√© zpr√°vy #${testCounter}`, 'player');
                    updateTestResults(`Hr√°ƒçsk√° zpr√°va #${testCounter} p≈ôid√°na - m√° b√Ωt ZELEN√Å`, true);
                } else {
                    updateTestResults('Funkce addChatMessage nen√≠ dostupn√°', false);
                }
            } catch (error) {
                updateTestResults(`Chyba p≈ôi p≈ôid√°v√°n√≠ hr√°ƒçsk√© zpr√°vy: ${error.message}`, false);
            }
        }
        
        function testAIMessage() {
            testCounter++;
            try {
                if (typeof window.addChatMessage === 'function') {
                    window.addChatMessage('Gemini', `Test AI zpr√°vy #${testCounter}`, 'ai', 'neon-blue');
                    updateTestResults(`AI zpr√°va #${testCounter} p≈ôid√°na - m√° b√Ωt MODR√Å`, true);
                } else {
                    updateTestResults('Funkce addChatMessage nen√≠ dostupn√°', false);
                }
            } catch (error) {
                updateTestResults(`Chyba p≈ôi p≈ôid√°v√°n√≠ AI zpr√°vy: ${error.message}`, false);
            }
        }
        
        function clearChat() {
            const chatMessages = document.getElementById('chatMessages');
            const chatMessagesMobile = document.getElementById('chatMessagesMobile');
            
            if (chatMessages) chatMessages.innerHTML = '';
            if (chatMessagesMobile) chatMessagesMobile.innerHTML = '';
            
            document.getElementById('testResults').innerHTML = '<div class="status">üßπ Chat vyƒçi≈°tƒõn - p≈ôipraven na nov√© testy</div>';
            testCounter = 0;
        }
        
        function sendTestMessage() {
            const input = document.getElementById('testInput');
            const message = input.value.trim();
            
            if (message) {
                testCounter++;
                try {
                    window.addChatMessage('Test U≈æivatel', message, 'player');
                    updateTestResults(`Zpr√°va "${message}" odesl√°na`, true);
                    input.value = '';
                } catch (error) {
                    updateTestResults(`Chyba p≈ôi odes√≠l√°n√≠: ${error.message}`, false);
                }
            }
        }
        
        // Test p≈ôi naƒçten√≠ str√°nky
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                updateTestResults('Str√°nka naƒçtena - funkce p≈ôipraveny k testov√°n√≠', true);
                
                // Ovƒõ≈ôen√≠ dostupnosti funkc√≠
                if (typeof window.addChatMessage === 'function') {
                    updateTestResults('window.addChatMessage je dostupn√°', true);
                } else {
                    updateTestResults('window.addChatMessage NEN√ç dostupn√°', false);
                }
                
                if (typeof window.addChatMessageBootstrap === 'function') {
                    updateTestResults('window.addChatMessageBootstrap je dostupn√°', true);
                } else {
                    updateTestResults('window.addChatMessageBootstrap NEN√ç dostupn√°', false);
                }
            }, 1000);
        });
        
        // Enter key support
        document.getElementById('testInput').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                sendTestMessage();
            }
        });
    </script>
</body>
</html>
