<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>🎲 AI Kostková Výzva</title>
    <link rel="icon" type="image/svg+xml" href="/dice.svg" />
    
    <!-- Bootstrap CSS explicitně načteno zde pro jistotu -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    
    <!-- GOOGLE FONTS PRO NEONOVÝ VZHLED -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <!-- REMIX ICON - OUTLINE IKONY PRO NEONOVÉ EFEKTY -->
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    
    <!-- Optimalizovaný CSS - obsahuje pouze nezbytné styly -->
    <link rel="stylesheet" href="/src/styles/main-optimized.css">
</head>
<body class="bg-black min-vh-100 d-flex justify-content-center align-items-center d-md-flex d-sm-block">
    <!-- Hlavní kontejner - max 90% výšky a šířky obrazovky na desktop, full na mobilu -->
    <div class="container-fluid mw-90 mh-90 vh-90 border border-neon-green rounded d-none d-md-block">
        <!-- Desktop layout - Bootstrap grid systém -->
        <div class="row h-100">
            <!-- Herní oblast - 70% šířky na středních a velkých obrazovkách -->
            <div class="col-12 col-md-7 h-100 overflow-auto p-2 p-md-3">
                <!-- Herní box s vlastním neonovým orámováním -->
                <div class="h-100 game-box p-2 p-md-3 rounded border border-neon-green shadow-neon d-flex flex-column justify-content-center">
                    
                    <!-- MENU STAV - uspořádané menu (výchozí viditelný) -->
                    <div class="game-header text-center" id="gameHeader">
                        <!-- Nadpis uprostřed nahoře -->
                        <h1 class="game-title neon-text fs-neon-1 mb-2 mb-md-3">
                            <i class="ri-dice-line me-1 me-md-2"></i>
                            <span class="title-text">AI Kostková Výzva</span>
                        </h1>
                        
                        <!-- Neonová kostka pod nadpisem -->
                        <div class="neon-dice-decoration mb-2 mb-md-4">
                            <i class="ri-dice-6-line dice-icon neon-green"></i>
                        </div>
                        
                        <!-- Nápis "Cílové skóre" bez rámečku -->
                        <div class="score-label neon-text mb-2 mb-md-3">
                            <i class="ri-star-line me-1 me-md-2"></i><span class="score-label-text">Cílové skóre</span>
                        </div>
                        
                        <!-- Orámečkované nastavení skóre -->
                        <div class="target-score-input mb-2 mb-md-4">
                            <input type="number" id="targetScoreInput" class="form-control-neon text-center" value="10000" min="1000" step="1000">
                        </div>
                        
                        <!-- Tlačítka ve správném pořadí s střídajícími se barvami -->
                        <div class="menu-buttons d-flex flex-column align-items-center gap-1 gap-md-2">
                            <!-- Začít hru - Zelená -->
                            <button class="btn btn-neon neon-green menu-btn" id="startGameBtn">
                                <i class="ri-gamepad-line me-1 me-md-2"></i>
                                <span class="menu-btn-text">Začít hru</span>
                            </button>
                            
                            <!-- Pravidla - Modrá -->
                            <button class="btn btn-neon neon-blue menu-btn" id="rulesBtn">
                                <i class="ri-book-open-line me-1 me-md-2"></i>
                                <span class="menu-btn-text">Pravidla</span>
                            </button>
                            
                            <!-- Síň slávy - Oranžová -->
                            <button class="btn btn-neon neon-orange menu-btn" id="hallOfFameBtn">
                                <i class="ri-trophy-line me-1 me-md-2"></i>
                                <span class="menu-btn-text">Síň slávy</span>
                            </button>
                            
                            <!-- Kup mi kávu - Zelená -->
                            <a href="https://buymeacoffee.com/pipap" target="_blank" class="btn btn-neon neon-green menu-btn text-decoration-none">
                                <i class="ri-cup-line me-1 me-md-2"></i>
                                <span class="menu-btn-text">Kup mi kávu</span>
                            </a>
                            
                            <!-- Opustit hru - Červená -->
                            <button class="btn btn-neon neon-red menu-btn" id="exitGameBtn">
                                <i class="ri-logout-box-line me-1 me-md-2"></i>
                                <span class="menu-btn-text">Opustit hru</span>
                            </button>
                        </div>
                    </div>

                    <!-- HERNÍ STAV - avatary, kostky, tlačítka (skrytý na začátku) -->
                    <div class="game-controls hidden" id="gameControls">
                        <!-- Avatary hráčů -->
                        <div class="players-container d-flex flex-wrap justify-content-center gap-4 mb-4">
                            <div class="player human-player active border-neon-green p-3 rounded text-center">
                                <div class="player-head mb-2">
                                    <img src="/ai-icons/mind.jpeg" alt="Vy" class="rounded-circle" />
                                </div>
                                <div class="player-name neon-text neon-green mb-1">Vy</div>
                                <div class="player-score neon-text neon-green">Skóre: <span id="humanScore" class="fw-bold">0</span></div>
                            </div>
                            <div class="player gemini-player border-neon-blue p-3 rounded text-center">
                                <div class="player-head mb-2">
                                    <img src="/ai-icons/gemini.jpeg" alt="Gemini" class="rounded-circle" />
                                </div>
                                <div class="player-name neon-text neon-blue mb-1">Gemini</div>
                                <div class="player-score neon-text neon-blue">Skóre: <span id="geminiScore" class="fw-bold">0</span></div>
                            </div>
                            <div class="player chatgpt-player border-neon-orange p-3 rounded text-center">
                                <div class="player-head mb-2">
                                    <img src="/ai-icons/gpt.jpeg" alt="ChatGPT" class="rounded-circle" />
                                </div>
                                <div class="player-name neon-text neon-orange mb-1">ChatGPT</div>
                                <div class="player-score neon-text neon-orange">Skóre: <span id="chatgptScore" class="fw-bold">0</span></div>
                            </div>
                            <div class="player claude-player border-neon-pink p-3 rounded text-center">
                                <div class="player-head mb-2">
                                    <img src="/ai-icons/claude.jpeg" alt="Claude" class="rounded-circle" />
                                </div>
                                <div class="player-name neon-text neon-pink mb-1">Claude</div>
                                <div class="player-score neon-text neon-pink">Skóre: <span id="claudeScore" class="fw-bold">0</span></div>
                            </div>
                        </div>
                        
                        <div class="turn-info p-2 mb-3 border-neon-green neon-text bg-dark-80 rounded text-center" id="turnInfo">Váš tah!</div>
                        <div class="current-turn-score p-2 mb-3 border-neon-green neon-text bg-dark-80 rounded text-center" id="currentTurnScore">Skóre tahu: 0</div>
                        <div class="target-info p-2 mb-3 border-neon-green neon-text bg-dark-80 rounded text-center" id="targetInfo">
                            Cíl: <span id="targetScoreDisplay" class="fw-bold">10000</span>
                        </div>
                        
                        <div class="dice-container d-flex flex-wrap justify-content-center gap-3 my-4" id="diceContainer"></div>
                        
                        <div class="roll-controls d-flex flex-wrap justify-content-center gap-3 my-4">
                            <button class="btn btn-neon neon-green" id="rollBtn">
                                <i class="ri-dice-line me-2"></i>
                                Hodit kostky
                            </button>
                            <button class="btn btn-neon neon-blue" id="bankBtn" disabled>
                                <i class="ri-save-line me-2"></i>
                                Odložit vybrané
                            </button>
                            <button class="btn btn-neon neon-orange" id="endTurnBtn" disabled>
                                <i class="ri-stop-circle-line me-2"></i>
                                Ukončit tah
                            </button>
                            <button class="btn btn-neon neon-pink" id="quitGameBtn">
                                <i class="ri-logout-box-line me-2"></i>
                                Opustit hru
                            </button>
                        </div>
                    </div>
                    
                </div>
            </div>
            
            <!-- Chat panel - 30% šířky na středních a velkých obrazovkách -->
            <div class="col-12 col-md-5 h-100 p-2 p-md-3" id="chatPanel">
                <!-- Minimalistický chat box s neonovým orámováním -->
                <div class="h-100 border border-neon-green bg-dark-80 rounded-3 shadow-neon d-flex flex-column">
                    <!-- Chat header bez dělící čáry -->
                    <div class="chat-header d-flex justify-content-center align-items-center p-1 p-md-2 sticky-top bg-dark-80">
                        <h2 class="m-0 fs-5 neon-green"><i class="ri-message-2-line me-2"></i> AI CHAT</h2>
                    </div>
                    
                    <!-- Zprávy s flex-grow-1 aby zabíraly dostupný prostor -->
                    <div class="chat-messages flex-grow-1 overflow-auto p-2 my-2 scrollbar-neon" id="chatMessages"></div>
                    
                    <!-- Chat input vždy dole bez dělících čar -->
                    <div class="chat-input p-2 mt-auto sticky-bottom bg-dark-80">
                        <div class="input-group border-0">
                            <input type="text" id="chatInput" class="form-control border-0 bg-dark text-success" placeholder="Napište zprávu..." maxlength="200">
                            <button id="sendMessageBtn" class="btn border-0 bg-transparent text-success" title="Odeslat zprávu">
                                <i class="ri-send-plane-fill" style="font-size: 1.5rem;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Game Over Modal -->
            <div id="gameOverModal" class="modal-overlay hidden">
                <div class="modal-container bg-dark-90 border-neon-green rounded">
                    <div class="modal-header border-bottom border-neon-green p-3">
                        <h2 class="modal-title neon-text m-0"><i class="ri-gamepad-line me-2"></i>Konec hry</h2>
                    </div>
                    <div class="modal-body p-4">
                        <div id="winnerAnnouncement" class="winner-announcement neon-text text-center mb-4"></div>
                        <div id="finalScores" class="final-scores mb-3"></div>
                        <div id="gameStats" class="game-stats mb-4"></div>
                        
                        <!-- Signature section for human winners -->
                        <div id="signatureSection" class="signature-section hidden bg-dark-80 p-3 rounded border-neon-green mb-4">
                            <h3 class="neon-text"><i class="ri-trophy-line me-2"></i>Gratulujeme k vítězství!</h3>
                            <p class="text-light">Zadejte svůj podpis pro zápis do síně slávy:</p>
                            <div class="signature-input d-flex gap-2">
                                <input type="text" id="winnerSignature" class="form-control-neon" placeholder="Váš podpis" maxlength="30">
                                <button id="saveScoreBtn" class="btn btn-neon neon-green"><i class="ri-save-line me-2"></i>Uložit skóre</button>
                            </div>
                        </div>
                        
                        <div class="modal-actions d-flex flex-wrap justify-content-center gap-3 mt-3">
                            <button id="showHallOfFameBtn" class="btn btn-neon neon-blue">
                                <i class="ri-trophy-line me-2"></i>Zobrazit síň slávy
                            </button>
                            <button id="startNewGameBtn" class="btn btn-neon neon-green">
                                <i class="ri-refresh-line me-2"></i>Nová hra
                            </button>
                            <button id="returnToMenuBtn" class="btn btn-neon neon-orange">
                                <i class="ri-home-line me-2"></i>Hlavní menu
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Hall of Fame Modal -->
            <div id="hallOfFameModal" class="modal-overlay hall-of-fame-modal hidden">
                <div class="modal-container bg-dark-90 border-neon-green rounded">
                    <div class="modal-header border-bottom border-neon-green p-3">
                        <h2 class="modal-title neon-text m-0"><i class="ri-trophy-line me-2"></i>Síň slávy</h2>
                    </div>
                    <div class="modal-body p-4">
                        <div id="hallOfFameContent">
                            <div id="hallOfFameList" class="table-responsive scrollbar-neon"></div>
                        </div>
                        <div class="modal-actions d-flex flex-wrap justify-content-center gap-3 mt-3">
                            <button id="closeHallOfFameBtn" class="btn btn-neon neon-blue">
                                <i class="ri-arrow-left-line me-2"></i>Zpět
                            </button>
                            <button id="newGameFromHallBtn" class="btn btn-neon neon-green">
                                <i class="ri-gamepad-line me-2"></i>Nová hra
                            </button>
                            <button id="mainMenuFromHallBtn" class="btn btn-neon neon-orange">
                                <i class="ri-home-line me-2"></i>Hlavní menu
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Rules Modal -->
            <div id="rulesModal" class="modal-overlay hidden">
                <div class="modal-container bg-dark-90 border-neon-blue rounded">
                    <div class="modal-header border-bottom border-neon-blue p-3">
                        <h2 class="modal-title neon-text neon-blue m-0"><i class="ri-book-open-line me-2"></i>Pravidla hry Farkle</h2>
                    </div>
                    <div class="modal-body p-4">
                        <div class="rules-content">
                            <h3 class="neon-text neon-green mb-3">🎯 Cíl hry</h3>
                            <p class="text-light mb-4">Jako první dosáhněte cílového skóre (obvykle 10 000 bodů).</p>
                            
                            <h3 class="neon-text neon-orange mb-3">🎲 Jak se hraje</h3>
                            <div class="text-light mb-4">
                                <p>• V každém tahu hodíte 6 kostkami</p>
                                <p>• Vyberte kostky, které chcete odložit pro body</p>
                                <p>• Můžete pokračovat a hodit znovu zbývajícími kostkami</p>
                                <p>• Nebo ukončit tah a přidat body ke svému celkovému skóre</p>
                                <p>• Pokud nehodíte žádné bodující kostky = <strong class="neon-red">FARKLE</strong> (ztratíte všechny body z tahu)</p>
                            </div>
                            
                            <h3 class="neon-text neon-pink mb-3">💎 Bodování kombinací</h3>
                            <div class="scoring-table bg-dark-80 p-3 rounded border border-neon-green mb-4">
                                <div class="row text-light">
                                    <div class="col-6"><strong>Kombinace</strong></div>
                                    <div class="col-6"><strong>Body</strong></div>
                                </div>
                                <hr class="border-neon-green">
                                <div class="row text-light mb-2">
                                    <div class="col-6">Každá 1</div>
                                    <div class="col-6 neon-green">100 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Každá 5</div>
                                    <div class="col-6 neon-green">50 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 1</div>
                                    <div class="col-6 neon-orange">1 000 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 2</div>
                                    <div class="col-6 neon-orange">200 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 3</div>
                                    <div class="col-6 neon-orange">300 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 4</div>
                                    <div class="col-6 neon-orange">400 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 5</div>
                                    <div class="col-6 neon-orange">500 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Tři 6</div>
                                    <div class="col-6 neon-orange">600 bodů</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Čtyři stejné</div>
                                    <div class="col-6 neon-pink">Trojice × 2</div>
                                </div>
                                <div class="row text-light mb-2">
                                    <div class="col-6">Pět stejných</div>
                                    <div class="col-6 neon-pink">Trojice × 4</div>
                                </div>
                                <div class="row text-light">
                                    <div class="col-6">Šest stejných</div>
                                    <div class="col-6 neon-pink">Trojice × 8</div>
                                </div>
                            </div>
                            
                            <h3 class="neon-text neon-blue mb-3">⚠️ Důležitá pravidla</h3>
                            <div class="text-light">
                                <p>• <strong class="neon-red">FARKLE:</strong> Když nehodíte žádné bodující kostky, ztratíte všechny body z aktuálního tahu</p>
                                <p>• <strong class="neon-green">Strategie:</strong> Ukončete tah včas, abyste si zajistili body</p>
                                <p>• <strong class="neon-orange">Riziko:</strong> Čím více hodů, tím větší šance na FARKLE</p>
                            </div>
                        </div>
                        
                        <div class="modal-actions d-flex justify-content-center gap-3 mt-4">
                            <button id="closeRulesBtn" class="btn btn-neon neon-blue">
                                <i class="ri-arrow-left-line me-2"></i>Zpět do menu
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div> <!-- Konec row -->
    </div> <!-- Konec desktop kontejneru -->
    
    <!-- Mobilní layout - zobrazí se pouze na zařízeních menších než md -->
    <div class="container-fluid d-block d-md-none mw-90 mh-90 vh-90 p-1">
        <!-- Menu section - horní část -->
        <div class="row g-0 h-75">
            <div class="col-12 h-100 p-1">
                <div class="h-100 game-box p-1 p-sm-2 rounded border border-neon-green shadow-neon d-flex flex-column justify-content-center">
                    <!-- Stejný obsah jako desktop menu -->
                    <div class="game-header text-center" id="gameHeaderMobile">
                        <!-- Nadpis uprostřed nahoře -->
                        <h1 class="game-title neon-text fs-6 mb-2">
                            <i class="ri-dice-line me-1"></i>
                            <span class="title-text">AI Kostková Výzva</span>
                        </h1>
                        
                        <!-- Neonová kostka pod nadpisem -->
                        <div class="neon-dice-decoration mb-2">
                            <i class="ri-dice-6-line dice-icon neon-green" style="font-size: 2rem;"></i>
                        </div>
                        
                        <!-- Nápis "Cílové skóre" bez rámečku -->
                        <div class="score-label neon-text mb-2" style="font-size: 0.8rem;">
                            <i class="ri-star-line me-1"></i><span class="score-label-text">Cílové skóre</span>
                        </div>
                        
                        <!-- Orámečkované nastavení skóre -->
                        <div class="target-score-input mb-2">
                            <input type="number" id="targetScoreInputMobile" class="form-control-neon text-center" value="10000" min="1000" step="1000" style="max-width: 200px; height: 35px; font-size: 0.9rem;">
                        </div>
                        
                        <!-- Tlačítka ve správném pořadí s střídajícími se barvami -->
                        <div class="menu-buttons d-flex flex-column align-items-center gap-1">
                            <!-- Začít hru - Zelená -->
                            <button class="btn btn-neon neon-green w-75" id="startGameBtnMobile" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-gamepad-line me-1"></i>
                                <span class="menu-btn-text">Začít hru</span>
                            </button>
                            
                            <!-- Pravidla - Modrá -->
                            <button class="btn btn-neon neon-blue w-75" id="rulesBtnMobile" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-book-open-line me-1"></i>
                                <span class="menu-btn-text">Pravidla</span>
                            </button>
                            
                            <!-- Síň slávy - Oranžová -->
                            <button class="btn btn-neon neon-orange w-75" id="hallOfFameBtnMobile" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-trophy-line me-1"></i>
                                <span class="menu-btn-text">Síň slávy</span>
                            </button>
                            
                            <!-- Kup mi kávu - Zelená -->
                            <a href="https://buymeacoffee.com/pipap" target="_blank" class="btn btn-neon neon-green text-decoration-none w-75" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-cup-line me-1"></i>
                                <span class="menu-btn-text">Kup mi kávu</span>
                            </a>
                            
                            <!-- Opustit hru - Červená -->
                            <button class="btn btn-neon neon-red w-75" id="exitGameBtnMobile" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-logout-box-line me-1"></i>
                                <span class="menu-btn-text">Opustit hru</span>
                            </button>
                        </div>
                    </div>

                    <!-- HERNÍ STAV pro mobil - skrytý na začátku -->
                    <div class="game-controls hidden" id="gameControlsMobile">
                        <div class="text-center">
                            <h3 class="neon-text neon-green mb-3" style="font-size: 1rem;">Hra běží...</h3>
                            <button class="btn btn-neon neon-pink w-75" id="quitGameBtnMobile" style="height: 35px; font-size: 0.8rem;">
                                <i class="ri-logout-box-line me-1"></i>
                                Opustit hru
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Chat section - spodní část -->
        <div class="row g-0 h-20 mt-1">
            <div class="col-12 h-100 p-2 pt-0">
                <div class="h-100 border border-neon-green bg-dark-80 rounded-3 shadow-neon d-flex flex-column" id="chatPanelMobile">
                    <!-- Chat header bez dělících čar -->
                    <div class="chat-header d-flex justify-content-center align-items-center p-1 p-sm-2 bg-dark-80">
                        <h2 class="neon-text neon-green m-0 fs-6">
                            <i class="ri-message-3-line me-1"></i>AI CHAT
                        </h2>
                    </div>
                    
                    <!-- Chat zprávy -->
                    <div class="chat-messages flex-grow-1 p-2 scrollbar-neon" id="chatMessagesMobile" style="overflow-y: auto;">
                        <div class="chat-message mb-2 small">
                            <strong class="neon-yellow">Systém:</strong> <span class="neon-yellow">Vítejte v AI Kostkové Výzvě!</span>
                        </div>
                        <div class="chat-message mb-2 small">
                            <strong class="neon-blue">Gemini:</strong> <span class="neon-blue">Připraven na hru?</span>
                        </div>
                    </div>
                    
                    <!-- Chat input bez ohraničení -->
                    <div class="chat-input p-2">
                        <div class="input-group input-group-sm border-0">
                            <input type="text" class="form-control border-0 bg-dark text-success small" id="chatInputMobile" placeholder="Napište zprávu...">
                            <button class="btn text-success border-0 bg-transparent" type="button" id="sendChatBtnMobile">
                                <i class="ri-send-plane-fill" style="font-size: 1.5rem;"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    
    <!-- Main Application Script -->
    <script type="module" src="/src/main.js"></script>
</body>
</html>
