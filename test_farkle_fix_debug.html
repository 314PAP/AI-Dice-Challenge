<!DOCTYPE html>
<html lang="cs">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ğŸ² Test Farkle Fix</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #00ff41;
            margin: 20px;
            line-height: 1.6;
        }
        .test-section {
            border: 2px solid #00ff41;
            margin: 20px 0;
            padding: 15px;
            border-radius: 8px;
        }
        .console-output {
            background: #111;
            border: 1px solid #333;
            padding: 10px;
            height: 300px;
            overflow-y: auto;
            font-size: 12px;
            margin-top: 10px;
        }
        button {
            background: #00ff41;
            color: #000;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            cursor: pointer;
            border-radius: 4px;
            font-weight: bold;
        }
        .critical {
            color: #ff3333;
            font-weight: bold;
        }
        .success {
            color: #00ff41;
            font-weight: bold;
        }
        .info {
            color: #ffff00;
        }
    </style>
</head>
<body>
    <h1>ğŸ² Test Farkle Fix - Debugging</h1>
    
    <div class="test-section">
        <h2>ğŸ”§ Status Oprav</h2>
        <div class="success">âœ… PÅ™idÃ¡no podrobnÃ© debug logging</div>
        <div class="success">âœ… Opraveny potenciÃ¡lnÃ­ problÃ©my s currentTurnScore</div>
        <div class="success">âœ… PÅ™idÃ¡ny safeguards proti zaseknutÃ­ AI</div>
        <div class="success">âœ… VyÅ™eÅ¡eno npm/pnpm varovÃ¡nÃ­</div>
        
        <h3>ğŸ¯ Co bylo opraveno:</h3>
        <ul>
            <li><strong>bankSelectedDice()</strong> - PÅ™idÃ¡no detailnÃ­ logovÃ¡nÃ­ pro sledovÃ¡nÃ­ skÃ³re</li>
            <li><strong>endTurn()</strong> - Debug informace o pÅ™enosu skÃ³re mezi hrÃ¡Äi</li>
            <li><strong>AI logika</strong> - PodrobnÃ© logy pro AI rozhodovÃ¡nÃ­ a bankovnÃ­ logiku</li>
            <li><strong>playerTurn()</strong> - Reset kontroly pro currentTurnScore</li>
            <li><strong>Game state</strong> - BezpeÄnostnÃ­ resety a kontroly</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>ğŸ® TestovacÃ­ Instructions</h2>
        <div class="info">
            1. OtevÅ™ete hru v hlavnÃ­m oknÄ›<br>
            2. OtevÅ™ete Developer Tools (F12)<br>
            3. OdloÅ¾te nÄ›jakÃ© kostky (napÅ™. 1050 bodÅ¯)<br>
            4. Sledujte konzoli pro detailnÃ­ debug informace<br>
            5. Zkontrolujte, Å¾e se skÃ³re sprÃ¡vnÄ› pÅ™enÃ¡Å¡Ã­ mezi hrÃ¡Äi
        </div>
        
        <h3>ğŸ” Co sledovat v konzoli:</h3>
        <ul>
            <li><span class="critical">ğŸ¦ === BANKING DICE START ===</span> - ZaÄÃ¡tek bankovnÃ­ho procesu</li>
            <li><span class="info">ğŸ’° Current turn score AFTER adding:</span> - SkÃ³re po pÅ™idÃ¡nÃ­</li>
            <li><span class="critical">ğŸ¯ === ENDTURN START ===</span> - ZaÄÃ¡tek ukonÄenÃ­ tahu</li>
            <li><span class="info">ğŸ’° SCORE ADDED:</span> - PÅ™idÃ¡nÃ­ skÃ³re k celkovÃ©mu skÃ³re hrÃ¡Äe</li>
            <li><span class="critical">ğŸ¤– === AI TURN START ===</span> - ZaÄÃ¡tek AI tahu</li>
            <li><span class="info">ğŸ§  === AI DECISION START ===</span> - AI rozhodovÃ¡nÃ­</li>
        </ul>
    </div>
    
    <div class="test-section">
        <h2>ğŸ“Š Quick Test Console</h2>
        <button onclick="showDebugInfo()">Show Game State</button>
        <button onclick="clearConsole()">Clear Console</button>
        <div id="consoleOutput" class="console-output"></div>
    </div>

    <script>
        const consoleOutput = document.getElementById('consoleOutput');
        
        // Capture console logs
        const originalLog = console.log;
        const originalWarn = console.warn;
        const originalError = console.error;
        
        function addToConsole(message, type = 'log') {
            const timestamp = new Date().toLocaleTimeString();
            const div = document.createElement('div');
            div.innerHTML = `[${timestamp}] ${message}`;
            
            switch(type) {
                case 'warn':
                    div.style.color = '#ffff00';
                    break;
                case 'error':
                    div.style.color = '#ff3333';
                    break;
                default:
                    div.style.color = '#00ff41';
            }
            
            consoleOutput.appendChild(div);
            consoleOutput.scrollTop = consoleOutput.scrollHeight;
        }
        
        console.log = function(...args) {
            originalLog.apply(console, args);
            addToConsole(args.join(' '), 'log');
        };
        
        console.warn = function(...args) {
            originalWarn.apply(console, args);
            addToConsole(args.join(' '), 'warn');
        };
        
        console.error = function(...args) {
            originalError.apply(console, args);
            addToConsole(args.join(' '), 'error');
        };
        
        function showDebugInfo() {
            console.log('ğŸ” === DEBUG INFO ===');
            console.log('Current URL:', window.location.href);
            console.log('Time:', new Date().toISOString());
            console.log('User Agent:', navigator.userAgent);
            
            // Try to access game state if available
            if (window.gameState) {
                console.log('ğŸ® Game State Available:');
                console.log('Current Player:', window.gameState.currentPlayer);
                console.log('Current Turn Score:', window.gameState.currentTurnScore);
                console.log('Players:', window.gameState.players.map(p => `${p.name}: ${p.score}`));
            } else {
                console.log('âŒ Game State not available in this window');
            }
        }
        
        function clearConsole() {
            consoleOutput.innerHTML = '';
            console.log('ğŸ§¹ Console cleared');
        }
        
        // Initial message
        console.log('ğŸ² Farkle Fix Test Page loaded');
        console.log('ğŸ“Š Ready to monitor game debugging');
    </script>
</body>
</html>
